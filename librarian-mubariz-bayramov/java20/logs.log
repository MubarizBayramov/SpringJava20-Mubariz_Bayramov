2025-04-24 10:11:42 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2025-04-24 10:11:42 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - Starting LibrarianMubarizBayramovApplication using Java 21.0.5 with PID 119888 (C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes started by User in C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov)
2025-04-24 10:11:42 [restartedMain] DEBUG a.d.l.LibrarianMubarizBayramovApplication - Running with Spring Boot v3.3.1, Spring v6.1.10
2025-04-24 10:11:42 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - No active profile set, falling back to 1 default profile: "default"
2025-04-24 10:11:42 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-04-24 10:11:42 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-04-24 10:11:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-24 10:11:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 228 ms. Found 7 JPA repository interfaces.
2025-04-24 10:11:45 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8888 (http)
2025-04-24 10:11:45 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8888"]
2025-04-24 10:11:45 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-04-24 10:11:45 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-04-24 10:11:45 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-04-24 10:11:45 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3247 ms
2025-04-24 10:11:45 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-04-24 10:11:46 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:db user=ROOT
2025-04-24 10:11:46 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-04-24 10:11:46 [restartedMain] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:db'
2025-04-24 10:11:46 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-24 10:11:46 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.2.Final
2025-04-24 10:11:46 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-04-24 10:11:46 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-24 10:11:48 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-04-24 10:11:48 [restartedMain] DEBUG org.hibernate.SQL - create table authorities (id integer generated by default as identity, authority varchar(255), username varchar(255), primary key (id))
2025-04-24 10:11:48 [restartedMain] DEBUG org.hibernate.SQL - create table authority_list (id integer generated by default as identity, authority varchar(255), librarian integer, student integer, primary key (id))
2025-04-24 10:11:48 [restartedMain] DEBUG org.hibernate.SQL - create table books (id integer generated by default as identity, author varchar(255), category_id integer, color varchar(255), description varchar(255), librarian_code integer, name varchar(255), page_count integer, price numeric(38,2), publish_date date, quantity integer, weight float(53), primary key (id))
2025-04-24 10:11:48 [restartedMain] DEBUG org.hibernate.SQL - create table librarians (id integer generated by default as identity, birthday date, name varchar(255), phone varchar(255), surname varchar(255), primary key (id))
2025-04-24 10:11:48 [restartedMain] DEBUG org.hibernate.SQL - create table librarians_book_count (id integer not null, count integer, name varchar(255), primary key (id))
2025-04-24 10:11:48 [restartedMain] DEBUG org.hibernate.SQL - create table students (id integer generated by default as identity, age integer, email varchar(255), librarian_code integer, name varchar(255), surname varchar(255), primary key (id))
2025-04-24 10:11:48 [restartedMain] DEBUG org.hibernate.SQL - create table translates (id integer generated by default as identity, language varchar(255), translate varchar(255), word varchar(255), primary key (id))
2025-04-24 10:11:48 [restartedMain] DEBUG org.hibernate.SQL - create table users (username varchar(255) not null, enabled boolean, password varchar(255), user_id integer, user_type varchar(255), primary key (username))
2025-04-24 10:11:48 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-24 10:11:48 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-04-24 10:11:48 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-04-24 10:11:49 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-04-24 10:11:49 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-04-24 10:11:49 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-04-24 10:11:49 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8888"]
2025-04-24 10:11:50 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8888 (http) with context path '/'
2025-04-24 10:11:50 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - Started LibrarianMubarizBayramovApplication in 8.629 seconds (process running for 9.286)
2025-04-24 10:29:30 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2025-04-24 10:29:30 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - Starting LibrarianMubarizBayramovApplication using Java 21.0.5 with PID 121920 (C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes started by User in C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov)
2025-04-24 10:29:30 [restartedMain] DEBUG a.d.l.LibrarianMubarizBayramovApplication - Running with Spring Boot v3.3.1, Spring v6.1.10
2025-04-24 10:29:30 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - No active profile set, falling back to 1 default profile: "default"
2025-04-24 10:29:30 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-04-24 10:29:30 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-04-24 10:29:32 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-24 10:29:32 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 252 ms. Found 7 JPA repository interfaces.
2025-04-24 10:29:34 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8888 (http)
2025-04-24 10:29:34 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8888"]
2025-04-24 10:29:34 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-04-24 10:29:34 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-04-24 10:29:34 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-04-24 10:29:34 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3760 ms
2025-04-24 10:29:34 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-04-24 10:29:34 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:db user=ROOT
2025-04-24 10:29:34 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-04-24 10:29:34 [restartedMain] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:db'
2025-04-24 10:29:34 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-24 10:29:35 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.2.Final
2025-04-24 10:29:35 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-04-24 10:29:35 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-24 10:29:37 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-04-24 10:29:37 [restartedMain] DEBUG org.hibernate.SQL - create table authorities (id integer generated by default as identity, authority varchar(255), username varchar(255), primary key (id))
2025-04-24 10:29:37 [restartedMain] DEBUG org.hibernate.SQL - create table authority_list (id integer generated by default as identity, authority varchar(255), librarian integer, student integer, primary key (id))
2025-04-24 10:29:37 [restartedMain] DEBUG org.hibernate.SQL - create table books (id integer generated by default as identity, author varchar(255), category_id integer, color varchar(255), description varchar(255), librarian_code integer, name varchar(255), page_count integer, price numeric(38,2), publish_date date, quantity integer, weight float(53), primary key (id))
2025-04-24 10:29:37 [restartedMain] DEBUG org.hibernate.SQL - create table librarians (id integer generated by default as identity, birthday date, name varchar(255), phone varchar(255), surname varchar(255), primary key (id))
2025-04-24 10:29:37 [restartedMain] DEBUG org.hibernate.SQL - create table librarians_book_count (id integer not null, count integer, name varchar(255), primary key (id))
2025-04-24 10:29:37 [restartedMain] DEBUG org.hibernate.SQL - create table students (id integer generated by default as identity, age integer, email varchar(255), librarian_code integer, name varchar(255), surname varchar(255), primary key (id))
2025-04-24 10:29:37 [restartedMain] DEBUG org.hibernate.SQL - create table translates (id integer generated by default as identity, language varchar(255), translate varchar(255), word varchar(255), primary key (id))
2025-04-24 10:29:37 [restartedMain] DEBUG org.hibernate.SQL - create table users (username varchar(255) not null, enabled boolean, password varchar(255), user_id integer, user_type varchar(255), primary key (username))
2025-04-24 10:29:37 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-24 10:29:37 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-04-24 10:29:38 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-04-24 10:29:38 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-04-24 10:29:38 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-04-24 10:29:39 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-04-24 10:29:39 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8888"]
2025-04-24 10:29:39 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8888 (http) with context path '/'
2025-04-24 10:29:39 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - Started LibrarianMubarizBayramovApplication in 10.268 seconds (process running for 11.12)
2025-04-24 13:44:16 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2025-04-24 13:44:16 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - Starting LibrarianMubarizBayramovApplication using Java 21.0.5 with PID 90340 (C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes started by User in C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov)
2025-04-24 13:44:16 [restartedMain] DEBUG a.d.l.LibrarianMubarizBayramovApplication - Running with Spring Boot v3.3.1, Spring v6.1.10
2025-04-24 13:44:16 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - No active profile set, falling back to 1 default profile: "default"
2025-04-24 13:44:16 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-04-24 13:44:16 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-04-24 13:44:18 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-24 13:44:19 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 247 ms. Found 8 JPA repository interfaces.
2025-04-24 13:44:20 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8888 (http)
2025-04-24 13:44:20 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8888"]
2025-04-24 13:44:20 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-04-24 13:44:20 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-04-24 13:44:20 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-04-24 13:44:20 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3777 ms
2025-04-24 13:44:20 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-04-24 13:44:21 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:db user=ROOT
2025-04-24 13:44:21 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-04-24 13:44:21 [restartedMain] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:db'
2025-04-24 13:44:21 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-24 13:44:21 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.2.Final
2025-04-24 13:44:21 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-04-24 13:44:21 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-24 13:44:22 [restartedMain] ERROR o.s.o.j.LocalContainerEntityManagerFactoryBean - Failed to initialize JPA EntityManagerFactory: Entity 'az.devolopia.librarian_mubariz_bayramov.entity.StudentBookEntity' has no identifier (every '@Entity' class must declare or inherit at least one '@Id' or '@EmbeddedId' property)
2025-04-24 13:44:22 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Entity 'az.devolopia.librarian_mubariz_bayramov.entity.StudentBookEntity' has no identifier (every '@Entity' class must declare or inherit at least one '@Id' or '@EmbeddedId' property)
2025-04-24 13:44:22 [restartedMain] WARN  o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-224]
2025-04-24 13:44:22 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-04-24 13:44:22 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-04-24 13:44:22 [restartedMain] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-04-24 13:44:22 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-04-24 13:44:22 [restartedMain] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Entity 'az.devolopia.librarian_mubariz_bayramov.entity.StudentBookEntity' has no identifier (every '@Entity' class must declare or inherit at least one '@Id' or '@EmbeddedId' property)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352)
	at az.devolopia.librarian_mubariz_bayramov.LibrarianMubarizBayramovApplication.main(LibrarianMubarizBayramovApplication.java:11)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.hibernate.AnnotationException: Entity 'az.devolopia.librarian_mubariz_bayramov.entity.StudentBookEntity' has no identifier (every '@Entity' class must declare or inherit at least one '@Id' or '@EmbeddedId' property)
	at org.hibernate.boot.model.internal.InheritanceState.determineDefaultAccessType(InheritanceState.java:279)
	at org.hibernate.boot.model.internal.InheritanceState.getElementsToProcess(InheritanceState.java:215)
	at org.hibernate.boot.model.internal.InheritanceState.postProcess(InheritanceState.java:160)
	at org.hibernate.boot.model.internal.EntityBinder.handleIdentifier(EntityBinder.java:407)
	at org.hibernate.boot.model.internal.EntityBinder.bindEntityClass(EntityBinder.java:248)
	at org.hibernate.boot.model.internal.AnnotationBinder.bindClass(AnnotationBinder.java:399)
	at org.hibernate.boot.model.source.internal.annotations.AnnotationMetadataSourceProcessorImpl.processEntityHierarchies(AnnotationMetadataSourceProcessorImpl.java:259)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess$1.processEntityHierarchies(MetadataBuildingProcess.java:281)
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:324)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1431)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1502)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784)
	... 18 common frames omitted
2025-04-24 13:47:36 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2025-04-24 13:47:36 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - Starting LibrarianMubarizBayramovApplication using Java 21.0.5 with PID 107868 (C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes started by User in C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov)
2025-04-24 13:47:36 [restartedMain] DEBUG a.d.l.LibrarianMubarizBayramovApplication - Running with Spring Boot v3.3.1, Spring v6.1.10
2025-04-24 13:47:36 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - No active profile set, falling back to 1 default profile: "default"
2025-04-24 13:47:36 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-04-24 13:47:36 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-04-24 13:47:37 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-24 13:47:37 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 136 ms. Found 8 JPA repository interfaces.
2025-04-24 13:47:38 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8888 (http)
2025-04-24 13:47:38 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8888"]
2025-04-24 13:47:38 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-04-24 13:47:38 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-04-24 13:47:39 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-04-24 13:47:39 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2895 ms
2025-04-24 13:47:39 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-04-24 13:47:39 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:db user=ROOT
2025-04-24 13:47:39 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-04-24 13:47:39 [restartedMain] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:db'
2025-04-24 13:47:39 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-24 13:47:39 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.2.Final
2025-04-24 13:47:39 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-04-24 13:47:40 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-24 13:47:41 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-04-24 13:47:41 [restartedMain] DEBUG org.hibernate.SQL - create table authorities (id integer generated by default as identity, authority varchar(255), username varchar(255), primary key (id))
2025-04-24 13:47:41 [restartedMain] DEBUG org.hibernate.SQL - create table authority_list (id integer generated by default as identity, authority varchar(255), librarian integer, student integer, primary key (id))
2025-04-24 13:47:41 [restartedMain] DEBUG org.hibernate.SQL - create table books (id integer generated by default as identity, author varchar(255), category_id integer, color varchar(255), description varchar(255), librarian_code integer, name varchar(255), page_count integer, price numeric(38,2), publish_date date, quantity integer, weight float(53), primary key (id))
2025-04-24 13:47:41 [restartedMain] DEBUG org.hibernate.SQL - create table librarians (id integer generated by default as identity, birthday date, name varchar(255), phone varchar(255), surname varchar(255), primary key (id))
2025-04-24 13:47:41 [restartedMain] DEBUG org.hibernate.SQL - create table librarians_book_count (id integer not null, count integer, name varchar(255), primary key (id))
2025-04-24 13:47:41 [restartedMain] DEBUG org.hibernate.SQL - create table student_books (id integer generated by default as identity, book_id integer, due_date date, given_date date, librarian_id integer, student_id integer, primary key (id))
2025-04-24 13:47:41 [restartedMain] DEBUG org.hibernate.SQL - create table students (id integer generated by default as identity, age integer, email varchar(255), librarian_code integer, name varchar(255), surname varchar(255), primary key (id))
2025-04-24 13:47:41 [restartedMain] DEBUG org.hibernate.SQL - create table translates (id integer generated by default as identity, language varchar(255), translate varchar(255), word varchar(255), primary key (id))
2025-04-24 13:47:41 [restartedMain] DEBUG org.hibernate.SQL - create table users (username varchar(255) not null, enabled boolean, password varchar(255), user_id integer, user_type varchar(255), primary key (username))
2025-04-24 13:47:41 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-24 13:47:41 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-04-24 13:47:42 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-04-24 13:47:42 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-04-24 13:47:42 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-04-24 13:47:42 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #12 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) CREATE TABLE student_books ( id INT AUTO_INCREMENT PRIMARY KEY, student_id INT, book_id INT, given_date DATE, due_date DATE, librarian_id INT )
2025-04-24 13:47:42 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-04-24 13:47:42 [restartedMain] WARN  o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-224]
2025-04-24 13:47:42 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-04-24 13:47:42 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-04-24 13:47:42 [restartedMain] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-04-24 13:47:42 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-04-24 13:47:42 [restartedMain] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #12 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) CREATE TABLE student_books ( id INT AUTO_INCREMENT PRIMARY KEY, student_id INT, book_id INT, given_date DATE, due_date DATE, librarian_id INT )
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:962)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352)
	at az.devolopia.librarian_mubariz_bayramov.LibrarianMubarizBayramovApplication.main(LibrarianMubarizBayramovApplication.java:11)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #12 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) CREATE TABLE student_books ( id INT AUTO_INCREMENT PRIMARY KEY, student_id INT, book_id INT, given_date DATE, due_date DATE, librarian_id INT )
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:282)
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254)
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54)
	at org.springframework.boot.jdbc.init.DataSourceScriptDatabaseInitializer.runScripts(DataSourceScriptDatabaseInitializer.java:87)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.runScripts(AbstractScriptDatabaseInitializer.java:146)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyScripts(AbstractScriptDatabaseInitializer.java:108)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyDataScripts(AbstractScriptDatabaseInitializer.java:102)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.initializeDatabase(AbstractScriptDatabaseInitializer.java:77)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.afterPropertiesSet(AbstractScriptDatabaseInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784)
	... 21 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) [*]CREATE TABLE student_books ( id INT AUTO_INCREMENT PRIMARY KEY, student_id INT, book_id INT, given_date DATE, due_date DATE, librarian_id INT )"; SQL statement:
Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) CREATE TABLE student_books ( id INT AUTO_INCREMENT PRIMARY KEY, student_id INT, book_id INT, given_date DATE, due_date DATE, librarian_id INT ) [42000-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.message.DbException.getSyntaxError(DbException.java:247)
	at org.h2.command.ParserBase.getSyntaxError(ParserBase.java:748)
	at org.h2.command.Parser.prepareCommand(Parser.java:486)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261)
	... 31 common frames omitted
2025-04-24 13:48:54 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2025-04-24 13:48:54 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - Starting LibrarianMubarizBayramovApplication using Java 21.0.5 with PID 117784 (C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes started by User in C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov)
2025-04-24 13:48:54 [restartedMain] DEBUG a.d.l.LibrarianMubarizBayramovApplication - Running with Spring Boot v3.3.1, Spring v6.1.10
2025-04-24 13:48:54 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - No active profile set, falling back to 1 default profile: "default"
2025-04-24 13:48:54 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-04-24 13:48:54 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-04-24 13:48:55 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-24 13:48:55 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 121 ms. Found 8 JPA repository interfaces.
2025-04-24 13:48:56 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8888 (http)
2025-04-24 13:48:56 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8888"]
2025-04-24 13:48:56 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-04-24 13:48:56 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-04-24 13:48:56 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-04-24 13:48:56 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2301 ms
2025-04-24 13:48:56 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-04-24 13:48:57 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:db user=ROOT
2025-04-24 13:48:57 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-04-24 13:48:57 [restartedMain] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:db'
2025-04-24 13:48:57 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-24 13:48:57 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.2.Final
2025-04-24 13:48:57 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-04-24 13:48:57 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-24 13:48:58 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-04-24 13:48:58 [restartedMain] DEBUG org.hibernate.SQL - create table authorities (id integer generated by default as identity, authority varchar(255), username varchar(255), primary key (id))
2025-04-24 13:48:58 [restartedMain] DEBUG org.hibernate.SQL - create table authority_list (id integer generated by default as identity, authority varchar(255), librarian integer, student integer, primary key (id))
2025-04-24 13:48:58 [restartedMain] DEBUG org.hibernate.SQL - create table books (id integer generated by default as identity, author varchar(255), category_id integer, color varchar(255), description varchar(255), librarian_code integer, name varchar(255), page_count integer, price numeric(38,2), publish_date date, quantity integer, weight float(53), primary key (id))
2025-04-24 13:48:58 [restartedMain] DEBUG org.hibernate.SQL - create table librarians (id integer generated by default as identity, birthday date, name varchar(255), phone varchar(255), surname varchar(255), primary key (id))
2025-04-24 13:48:58 [restartedMain] DEBUG org.hibernate.SQL - create table librarians_book_count (id integer not null, count integer, name varchar(255), primary key (id))
2025-04-24 13:48:58 [restartedMain] DEBUG org.hibernate.SQL - create table student_books (id integer generated by default as identity, book_id integer, due_date date, given_date date, librarian_id integer, student_id integer, primary key (id))
2025-04-24 13:48:58 [restartedMain] DEBUG org.hibernate.SQL - create table students (id integer generated by default as identity, age integer, email varchar(255), librarian_code integer, name varchar(255), surname varchar(255), primary key (id))
2025-04-24 13:48:58 [restartedMain] DEBUG org.hibernate.SQL - create table translates (id integer generated by default as identity, language varchar(255), translate varchar(255), word varchar(255), primary key (id))
2025-04-24 13:48:58 [restartedMain] DEBUG org.hibernate.SQL - create table users (username varchar(255) not null, enabled boolean, password varchar(255), user_id integer, user_type varchar(255), primary key (username))
2025-04-24 13:48:58 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-24 13:48:59 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-04-24 13:48:59 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-04-24 13:48:59 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-04-24 13:48:59 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-04-24 13:49:00 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #12 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) DROP TABLE IF EXISTS librarians_book_count
2025-04-24 13:49:00 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-04-24 13:49:00 [restartedMain] WARN  o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-224]
2025-04-24 13:49:00 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-04-24 13:49:00 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-04-24 13:49:00 [restartedMain] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-04-24 13:49:00 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-04-24 13:49:00 [restartedMain] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #12 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) DROP TABLE IF EXISTS librarians_book_count
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:962)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352)
	at az.devolopia.librarian_mubariz_bayramov.LibrarianMubarizBayramovApplication.main(LibrarianMubarizBayramovApplication.java:11)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #12 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) DROP TABLE IF EXISTS librarians_book_count
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:282)
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254)
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54)
	at org.springframework.boot.jdbc.init.DataSourceScriptDatabaseInitializer.runScripts(DataSourceScriptDatabaseInitializer.java:87)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.runScripts(AbstractScriptDatabaseInitializer.java:146)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyScripts(AbstractScriptDatabaseInitializer.java:108)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyDataScripts(AbstractScriptDatabaseInitializer.java:102)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.initializeDatabase(AbstractScriptDatabaseInitializer.java:77)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.afterPropertiesSet(AbstractScriptDatabaseInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784)
	... 21 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) [*]DROP TABLE IF EXISTS librarians_book_count"; SQL statement:
Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) DROP TABLE IF EXISTS librarians_book_count [42000-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.message.DbException.getSyntaxError(DbException.java:247)
	at org.h2.command.ParserBase.getSyntaxError(ParserBase.java:748)
	at org.h2.command.Parser.prepareCommand(Parser.java:486)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261)
	... 31 common frames omitted
2025-04-24 13:50:12 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2025-04-24 13:50:12 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - Starting LibrarianMubarizBayramovApplication using Java 21.0.5 with PID 123592 (C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes started by User in C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov)
2025-04-24 13:50:12 [restartedMain] DEBUG a.d.l.LibrarianMubarizBayramovApplication - Running with Spring Boot v3.3.1, Spring v6.1.10
2025-04-24 13:50:12 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - No active profile set, falling back to 1 default profile: "default"
2025-04-24 13:50:12 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-04-24 13:50:12 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-04-24 13:50:13 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-24 13:50:14 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 130 ms. Found 8 JPA repository interfaces.
2025-04-24 13:50:14 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8888 (http)
2025-04-24 13:50:14 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8888"]
2025-04-24 13:50:14 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-04-24 13:50:14 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-04-24 13:50:15 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-04-24 13:50:15 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2380 ms
2025-04-24 13:50:15 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-04-24 13:50:15 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:db user=ROOT
2025-04-24 13:50:15 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-04-24 13:50:15 [restartedMain] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:db'
2025-04-24 13:50:15 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-24 13:50:15 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.2.Final
2025-04-24 13:50:15 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-04-24 13:50:15 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-24 13:50:16 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-04-24 13:50:16 [restartedMain] DEBUG org.hibernate.SQL - create table authorities (id integer generated by default as identity, authority varchar(255), username varchar(255), primary key (id))
2025-04-24 13:50:16 [restartedMain] DEBUG org.hibernate.SQL - create table authority_list (id integer generated by default as identity, authority varchar(255), librarian integer, student integer, primary key (id))
2025-04-24 13:50:16 [restartedMain] DEBUG org.hibernate.SQL - create table books (id integer generated by default as identity, author varchar(255), category_id integer, color varchar(255), description varchar(255), librarian_code integer, name varchar(255), page_count integer, price numeric(38,2), publish_date date, quantity integer, weight float(53), primary key (id))
2025-04-24 13:50:16 [restartedMain] DEBUG org.hibernate.SQL - create table librarians (id integer generated by default as identity, birthday date, name varchar(255), phone varchar(255), surname varchar(255), primary key (id))
2025-04-24 13:50:16 [restartedMain] DEBUG org.hibernate.SQL - create table librarians_book_count (id integer not null, count integer, name varchar(255), primary key (id))
2025-04-24 13:50:16 [restartedMain] DEBUG org.hibernate.SQL - create table student_books (id integer generated by default as identity, book_id integer, due_date date, given_date date, librarian_id integer, student_id integer, primary key (id))
2025-04-24 13:50:16 [restartedMain] DEBUG org.hibernate.SQL - create table students (id integer generated by default as identity, age integer, email varchar(255), librarian_code integer, name varchar(255), surname varchar(255), primary key (id))
2025-04-24 13:50:16 [restartedMain] DEBUG org.hibernate.SQL - create table translates (id integer generated by default as identity, language varchar(255), translate varchar(255), word varchar(255), primary key (id))
2025-04-24 13:50:16 [restartedMain] DEBUG org.hibernate.SQL - create table users (username varchar(255) not null, enabled boolean, password varchar(255), user_id integer, user_type varchar(255), primary key (username))
2025-04-24 13:50:16 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-24 13:50:17 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-04-24 13:50:17 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-04-24 13:50:17 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-04-24 13:50:17 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-04-24 13:50:18 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #12 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) DROP VIEW IF EXISTS librarians_book_count
2025-04-24 13:50:18 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-04-24 13:50:18 [restartedMain] WARN  o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-224]
2025-04-24 13:50:18 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-04-24 13:50:18 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-04-24 13:50:18 [restartedMain] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-04-24 13:50:18 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-04-24 13:50:18 [restartedMain] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #12 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) DROP VIEW IF EXISTS librarians_book_count
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:962)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352)
	at az.devolopia.librarian_mubariz_bayramov.LibrarianMubarizBayramovApplication.main(LibrarianMubarizBayramovApplication.java:11)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #12 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) DROP VIEW IF EXISTS librarians_book_count
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:282)
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254)
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54)
	at org.springframework.boot.jdbc.init.DataSourceScriptDatabaseInitializer.runScripts(DataSourceScriptDatabaseInitializer.java:87)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.runScripts(AbstractScriptDatabaseInitializer.java:146)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyScripts(AbstractScriptDatabaseInitializer.java:108)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyDataScripts(AbstractScriptDatabaseInitializer.java:102)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.initializeDatabase(AbstractScriptDatabaseInitializer.java:77)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.afterPropertiesSet(AbstractScriptDatabaseInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784)
	... 21 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) [*]DROP VIEW IF EXISTS librarians_book_count"; SQL statement:
Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) DROP VIEW IF EXISTS librarians_book_count [42000-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.message.DbException.getSyntaxError(DbException.java:247)
	at org.h2.command.ParserBase.getSyntaxError(ParserBase.java:748)
	at org.h2.command.Parser.prepareCommand(Parser.java:486)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261)
	... 31 common frames omitted
2025-04-24 13:50:51 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2025-04-24 13:50:51 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - Starting LibrarianMubarizBayramovApplication using Java 21.0.5 with PID 121728 (C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes started by User in C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov)
2025-04-24 13:50:51 [restartedMain] DEBUG a.d.l.LibrarianMubarizBayramovApplication - Running with Spring Boot v3.3.1, Spring v6.1.10
2025-04-24 13:50:51 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - No active profile set, falling back to 1 default profile: "default"
2025-04-24 13:50:51 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-04-24 13:50:51 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-04-24 13:50:52 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-24 13:50:53 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 141 ms. Found 8 JPA repository interfaces.
2025-04-24 13:50:54 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8888 (http)
2025-04-24 13:50:54 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8888"]
2025-04-24 13:50:54 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-04-24 13:50:54 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-04-24 13:50:54 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-04-24 13:50:54 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2610 ms
2025-04-24 13:50:54 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-04-24 13:50:54 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:db user=ROOT
2025-04-24 13:50:54 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-04-24 13:50:54 [restartedMain] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:db'
2025-04-24 13:50:54 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-24 13:50:54 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.2.Final
2025-04-24 13:50:54 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-04-24 13:50:55 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-24 13:50:56 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-04-24 13:50:56 [restartedMain] DEBUG org.hibernate.SQL - create table authorities (id integer generated by default as identity, authority varchar(255), username varchar(255), primary key (id))
2025-04-24 13:50:56 [restartedMain] DEBUG org.hibernate.SQL - create table authority_list (id integer generated by default as identity, authority varchar(255), librarian integer, student integer, primary key (id))
2025-04-24 13:50:56 [restartedMain] DEBUG org.hibernate.SQL - create table books (id integer generated by default as identity, author varchar(255), category_id integer, color varchar(255), description varchar(255), librarian_code integer, name varchar(255), page_count integer, price numeric(38,2), publish_date date, quantity integer, weight float(53), primary key (id))
2025-04-24 13:50:56 [restartedMain] DEBUG org.hibernate.SQL - create table librarians (id integer generated by default as identity, birthday date, name varchar(255), phone varchar(255), surname varchar(255), primary key (id))
2025-04-24 13:50:56 [restartedMain] DEBUG org.hibernate.SQL - create table librarians_book_count (id integer not null, count integer, name varchar(255), primary key (id))
2025-04-24 13:50:56 [restartedMain] DEBUG org.hibernate.SQL - create table student_books (id integer generated by default as identity, book_id integer, due_date date, given_date date, librarian_id integer, student_id integer, primary key (id))
2025-04-24 13:50:56 [restartedMain] DEBUG org.hibernate.SQL - create table students (id integer generated by default as identity, age integer, email varchar(255), librarian_code integer, name varchar(255), surname varchar(255), primary key (id))
2025-04-24 13:50:56 [restartedMain] DEBUG org.hibernate.SQL - create table translates (id integer generated by default as identity, language varchar(255), translate varchar(255), word varchar(255), primary key (id))
2025-04-24 13:50:56 [restartedMain] DEBUG org.hibernate.SQL - create table users (username varchar(255) not null, enabled boolean, password varchar(255), user_id integer, user_type varchar(255), primary key (username))
2025-04-24 13:50:56 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-24 13:50:56 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-04-24 13:50:56 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-04-24 13:50:57 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-04-24 13:50:57 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-04-24 13:50:57 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #12 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) DROP VIEW IF EXISTS librarians_book_count
2025-04-24 13:50:57 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-04-24 13:50:57 [restartedMain] WARN  o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-224]
2025-04-24 13:50:57 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-04-24 13:50:57 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-04-24 13:50:57 [restartedMain] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-04-24 13:50:57 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-04-24 13:50:57 [restartedMain] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #12 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) DROP VIEW IF EXISTS librarians_book_count
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:962)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352)
	at az.devolopia.librarian_mubariz_bayramov.LibrarianMubarizBayramovApplication.main(LibrarianMubarizBayramovApplication.java:11)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #12 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) DROP VIEW IF EXISTS librarians_book_count
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:282)
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254)
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54)
	at org.springframework.boot.jdbc.init.DataSourceScriptDatabaseInitializer.runScripts(DataSourceScriptDatabaseInitializer.java:87)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.runScripts(AbstractScriptDatabaseInitializer.java:146)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyScripts(AbstractScriptDatabaseInitializer.java:108)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyDataScripts(AbstractScriptDatabaseInitializer.java:102)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.initializeDatabase(AbstractScriptDatabaseInitializer.java:77)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.afterPropertiesSet(AbstractScriptDatabaseInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784)
	... 21 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) [*]DROP VIEW IF EXISTS librarians_book_count"; SQL statement:
Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) DROP VIEW IF EXISTS librarians_book_count [42000-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.message.DbException.getSyntaxError(DbException.java:247)
	at org.h2.command.ParserBase.getSyntaxError(ParserBase.java:748)
	at org.h2.command.Parser.prepareCommand(Parser.java:486)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261)
	... 31 common frames omitted
2025-04-24 13:52:09 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2025-04-24 13:52:09 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - Starting LibrarianMubarizBayramovApplication using Java 21.0.5 with PID 125312 (C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes started by User in C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov)
2025-04-24 13:52:09 [restartedMain] DEBUG a.d.l.LibrarianMubarizBayramovApplication - Running with Spring Boot v3.3.1, Spring v6.1.10
2025-04-24 13:52:09 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - No active profile set, falling back to 1 default profile: "default"
2025-04-24 13:52:09 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-04-24 13:52:09 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-04-24 13:52:10 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-24 13:52:10 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 152 ms. Found 8 JPA repository interfaces.
2025-04-24 13:52:12 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8888 (http)
2025-04-24 13:52:12 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8888"]
2025-04-24 13:52:12 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-04-24 13:52:12 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-04-24 13:52:12 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-04-24 13:52:12 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2608 ms
2025-04-24 13:52:12 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-04-24 13:52:12 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:db user=ROOT
2025-04-24 13:52:12 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-04-24 13:52:12 [restartedMain] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:db'
2025-04-24 13:52:12 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-24 13:52:12 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.2.Final
2025-04-24 13:52:12 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-04-24 13:52:13 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-24 13:52:14 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-04-24 13:52:14 [restartedMain] DEBUG org.hibernate.SQL - create table authorities (id integer generated by default as identity, authority varchar(255), username varchar(255), primary key (id))
2025-04-24 13:52:14 [restartedMain] DEBUG org.hibernate.SQL - create table authority_list (id integer generated by default as identity, authority varchar(255), librarian integer, student integer, primary key (id))
2025-04-24 13:52:14 [restartedMain] DEBUG org.hibernate.SQL - create table books (id integer generated by default as identity, author varchar(255), category_id integer, color varchar(255), description varchar(255), librarian_code integer, name varchar(255), page_count integer, price numeric(38,2), publish_date date, quantity integer, weight float(53), primary key (id))
2025-04-24 13:52:14 [restartedMain] DEBUG org.hibernate.SQL - create table librarians (id integer generated by default as identity, birthday date, name varchar(255), phone varchar(255), surname varchar(255), primary key (id))
2025-04-24 13:52:14 [restartedMain] DEBUG org.hibernate.SQL - create table librarians_book_count (id integer not null, count integer, name varchar(255), primary key (id))
2025-04-24 13:52:14 [restartedMain] DEBUG org.hibernate.SQL - create table student_books (id integer generated by default as identity, book_id integer, due_date date, given_date date, librarian_id integer, student_id integer, primary key (id))
2025-04-24 13:52:14 [restartedMain] DEBUG org.hibernate.SQL - create table students (id integer generated by default as identity, age integer, email varchar(255), librarian_code integer, name varchar(255), surname varchar(255), primary key (id))
2025-04-24 13:52:14 [restartedMain] DEBUG org.hibernate.SQL - create table translates (id integer generated by default as identity, language varchar(255), translate varchar(255), word varchar(255), primary key (id))
2025-04-24 13:52:14 [restartedMain] DEBUG org.hibernate.SQL - create table users (username varchar(255) not null, enabled boolean, password varchar(255), user_id integer, user_type varchar(255), primary key (username))
2025-04-24 13:52:14 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-24 13:52:14 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-04-24 13:52:15 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-04-24 13:52:15 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-04-24 13:52:15 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-04-24 13:52:16 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #12 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) DROP VIEW IF EXISTS librarians_book_count
2025-04-24 13:52:16 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-04-24 13:52:16 [restartedMain] WARN  o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-224]
2025-04-24 13:52:16 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-04-24 13:52:16 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-04-24 13:52:16 [restartedMain] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-04-24 13:52:16 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-04-24 13:52:16 [restartedMain] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #12 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) DROP VIEW IF EXISTS librarians_book_count
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:962)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352)
	at az.devolopia.librarian_mubariz_bayramov.LibrarianMubarizBayramovApplication.main(LibrarianMubarizBayramovApplication.java:11)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #12 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) DROP VIEW IF EXISTS librarians_book_count
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:282)
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254)
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54)
	at org.springframework.boot.jdbc.init.DataSourceScriptDatabaseInitializer.runScripts(DataSourceScriptDatabaseInitializer.java:87)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.runScripts(AbstractScriptDatabaseInitializer.java:146)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyScripts(AbstractScriptDatabaseInitializer.java:108)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyDataScripts(AbstractScriptDatabaseInitializer.java:102)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.initializeDatabase(AbstractScriptDatabaseInitializer.java:77)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.afterPropertiesSet(AbstractScriptDatabaseInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784)
	... 21 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) [*]DROP VIEW IF EXISTS librarians_book_count"; SQL statement:
Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) DROP VIEW IF EXISTS librarians_book_count [42000-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.message.DbException.getSyntaxError(DbException.java:247)
	at org.h2.command.ParserBase.getSyntaxError(ParserBase.java:748)
	at org.h2.command.Parser.prepareCommand(Parser.java:486)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261)
	... 31 common frames omitted
2025-04-24 13:53:14 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2025-04-24 13:53:14 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - Starting LibrarianMubarizBayramovApplication using Java 21.0.5 with PID 115296 (C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes started by User in C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov)
2025-04-24 13:53:14 [restartedMain] DEBUG a.d.l.LibrarianMubarizBayramovApplication - Running with Spring Boot v3.3.1, Spring v6.1.10
2025-04-24 13:53:14 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - No active profile set, falling back to 1 default profile: "default"
2025-04-24 13:53:14 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-04-24 13:53:14 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-04-24 13:53:14 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-24 13:53:15 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 111 ms. Found 8 JPA repository interfaces.
2025-04-24 13:53:15 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8888 (http)
2025-04-24 13:53:15 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8888"]
2025-04-24 13:53:15 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-04-24 13:53:15 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-04-24 13:53:15 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-04-24 13:53:15 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1625 ms
2025-04-24 13:53:15 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-04-24 13:53:15 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:db user=ROOT
2025-04-24 13:53:15 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-04-24 13:53:15 [restartedMain] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:db'
2025-04-24 13:53:16 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-24 13:53:16 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.2.Final
2025-04-24 13:53:16 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-04-24 13:53:16 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-24 13:53:17 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-04-24 13:53:17 [restartedMain] DEBUG org.hibernate.SQL - create table authorities (id integer generated by default as identity, authority varchar(255), username varchar(255), primary key (id))
2025-04-24 13:53:17 [restartedMain] DEBUG org.hibernate.SQL - create table authority_list (id integer generated by default as identity, authority varchar(255), librarian integer, student integer, primary key (id))
2025-04-24 13:53:17 [restartedMain] DEBUG org.hibernate.SQL - create table books (id integer generated by default as identity, author varchar(255), category_id integer, color varchar(255), description varchar(255), librarian_code integer, name varchar(255), page_count integer, price numeric(38,2), publish_date date, quantity integer, weight float(53), primary key (id))
2025-04-24 13:53:17 [restartedMain] DEBUG org.hibernate.SQL - create table librarians (id integer generated by default as identity, birthday date, name varchar(255), phone varchar(255), surname varchar(255), primary key (id))
2025-04-24 13:53:17 [restartedMain] DEBUG org.hibernate.SQL - create table librarians_book_count (id integer not null, count integer, name varchar(255), primary key (id))
2025-04-24 13:53:17 [restartedMain] DEBUG org.hibernate.SQL - create table student_books (id integer generated by default as identity, book_id integer, due_date date, given_date date, librarian_id integer, student_id integer, primary key (id))
2025-04-24 13:53:17 [restartedMain] DEBUG org.hibernate.SQL - create table students (id integer generated by default as identity, age integer, email varchar(255), librarian_code integer, name varchar(255), surname varchar(255), primary key (id))
2025-04-24 13:53:17 [restartedMain] DEBUG org.hibernate.SQL - create table translates (id integer generated by default as identity, language varchar(255), translate varchar(255), word varchar(255), primary key (id))
2025-04-24 13:53:17 [restartedMain] DEBUG org.hibernate.SQL - create table users (username varchar(255) not null, enabled boolean, password varchar(255), user_id integer, user_type varchar(255), primary key (username))
2025-04-24 13:53:17 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-24 13:53:17 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-04-24 13:53:17 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-04-24 13:53:17 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-04-24 13:53:17 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-04-24 13:53:18 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #12 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) DROP VIEW IF EXISTS librarians_book_count
2025-04-24 13:53:18 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-04-24 13:53:18 [restartedMain] WARN  o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-224]
2025-04-24 13:53:18 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-04-24 13:53:18 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-04-24 13:53:18 [restartedMain] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-04-24 13:53:18 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-04-24 13:53:18 [restartedMain] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #12 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) DROP VIEW IF EXISTS librarians_book_count
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:962)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352)
	at az.devolopia.librarian_mubariz_bayramov.LibrarianMubarizBayramovApplication.main(LibrarianMubarizBayramovApplication.java:11)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #12 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) DROP VIEW IF EXISTS librarians_book_count
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:282)
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254)
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54)
	at org.springframework.boot.jdbc.init.DataSourceScriptDatabaseInitializer.runScripts(DataSourceScriptDatabaseInitializer.java:87)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.runScripts(AbstractScriptDatabaseInitializer.java:146)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyScripts(AbstractScriptDatabaseInitializer.java:108)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyDataScripts(AbstractScriptDatabaseInitializer.java:102)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.initializeDatabase(AbstractScriptDatabaseInitializer.java:77)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.afterPropertiesSet(AbstractScriptDatabaseInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784)
	... 21 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) [*]DROP VIEW IF EXISTS librarians_book_count"; SQL statement:
Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) DROP VIEW IF EXISTS librarians_book_count [42000-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.message.DbException.getSyntaxError(DbException.java:247)
	at org.h2.command.ParserBase.getSyntaxError(ParserBase.java:748)
	at org.h2.command.Parser.prepareCommand(Parser.java:486)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261)
	... 31 common frames omitted
2025-04-24 13:54:28 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2025-04-24 13:54:28 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - Starting LibrarianMubarizBayramovApplication using Java 21.0.5 with PID 124524 (C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes started by User in C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov)
2025-04-24 13:54:28 [restartedMain] DEBUG a.d.l.LibrarianMubarizBayramovApplication - Running with Spring Boot v3.3.1, Spring v6.1.10
2025-04-24 13:54:28 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - No active profile set, falling back to 1 default profile: "default"
2025-04-24 13:54:28 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-04-24 13:54:28 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-04-24 13:54:29 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-24 13:54:29 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 106 ms. Found 8 JPA repository interfaces.
2025-04-24 13:54:30 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8888 (http)
2025-04-24 13:54:30 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8888"]
2025-04-24 13:54:30 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-04-24 13:54:30 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-04-24 13:54:30 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-04-24 13:54:30 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1632 ms
2025-04-24 13:54:30 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-04-24 13:54:30 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:db user=ROOT
2025-04-24 13:54:30 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-04-24 13:54:30 [restartedMain] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:db'
2025-04-24 13:54:30 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-24 13:54:30 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.2.Final
2025-04-24 13:54:30 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-04-24 13:54:30 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-24 13:54:31 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-04-24 13:54:31 [restartedMain] DEBUG org.hibernate.SQL - create table authorities (id integer generated by default as identity, authority varchar(255), username varchar(255), primary key (id))
2025-04-24 13:54:31 [restartedMain] DEBUG org.hibernate.SQL - create table authority_list (id integer generated by default as identity, authority varchar(255), librarian integer, student integer, primary key (id))
2025-04-24 13:54:31 [restartedMain] DEBUG org.hibernate.SQL - create table books (id integer generated by default as identity, author varchar(255), category_id integer, color varchar(255), description varchar(255), librarian_code integer, name varchar(255), page_count integer, price numeric(38,2), publish_date date, quantity integer, weight float(53), primary key (id))
2025-04-24 13:54:31 [restartedMain] DEBUG org.hibernate.SQL - create table librarians (id integer generated by default as identity, birthday date, name varchar(255), phone varchar(255), surname varchar(255), primary key (id))
2025-04-24 13:54:31 [restartedMain] DEBUG org.hibernate.SQL - create table librarians_book_count (id integer not null, count integer, name varchar(255), primary key (id))
2025-04-24 13:54:31 [restartedMain] DEBUG org.hibernate.SQL - create table student_books (id integer generated by default as identity, book_id integer, due_date date, given_date date, librarian_id integer, student_id integer, primary key (id))
2025-04-24 13:54:31 [restartedMain] DEBUG org.hibernate.SQL - create table students (id integer generated by default as identity, age integer, email varchar(255), librarian_code integer, name varchar(255), surname varchar(255), primary key (id))
2025-04-24 13:54:31 [restartedMain] DEBUG org.hibernate.SQL - create table translates (id integer generated by default as identity, language varchar(255), translate varchar(255), word varchar(255), primary key (id))
2025-04-24 13:54:31 [restartedMain] DEBUG org.hibernate.SQL - create table users (username varchar(255) not null, enabled boolean, password varchar(255), user_id integer, user_type varchar(255), primary key (username))
2025-04-24 13:54:31 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-24 13:54:31 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-04-24 13:54:32 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-04-24 13:54:32 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-04-24 13:54:32 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-04-24 13:54:32 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-04-24 13:54:32 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8888"]
2025-04-24 13:54:32 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8888 (http) with context path '/'
2025-04-24 13:54:32 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - Started LibrarianMubarizBayramovApplication in 4.617 seconds (process running for 4.975)
2025-04-24 13:56:38 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2025-04-24 13:56:38 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - Starting LibrarianMubarizBayramovApplication using Java 21.0.5 with PID 119256 (C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes started by User in C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov)
2025-04-24 13:56:38 [restartedMain] DEBUG a.d.l.LibrarianMubarizBayramovApplication - Running with Spring Boot v3.3.1, Spring v6.1.10
2025-04-24 13:56:38 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - No active profile set, falling back to 1 default profile: "default"
2025-04-24 13:56:38 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-04-24 13:56:38 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-04-24 13:56:39 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-24 13:56:39 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 116 ms. Found 8 JPA repository interfaces.
2025-04-24 13:56:40 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8888 (http)
2025-04-24 13:56:40 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8888"]
2025-04-24 13:56:40 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-04-24 13:56:40 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-04-24 13:56:40 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-04-24 13:56:40 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1633 ms
2025-04-24 13:56:40 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-04-24 13:56:40 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:db user=ROOT
2025-04-24 13:56:40 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-04-24 13:56:40 [restartedMain] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:db'
2025-04-24 13:56:40 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-24 13:56:40 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.2.Final
2025-04-24 13:56:40 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-04-24 13:56:41 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-24 13:56:41 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-04-24 13:56:41 [restartedMain] DEBUG org.hibernate.SQL - create table authorities (id integer generated by default as identity, authority varchar(255), username varchar(255), primary key (id))
2025-04-24 13:56:41 [restartedMain] DEBUG org.hibernate.SQL - create table authority_list (id integer generated by default as identity, authority varchar(255), librarian integer, student integer, primary key (id))
2025-04-24 13:56:41 [restartedMain] DEBUG org.hibernate.SQL - create table books (id integer generated by default as identity, author varchar(255), category_id integer, color varchar(255), description varchar(255), librarian_code integer, name varchar(255), page_count integer, price numeric(38,2), publish_date date, quantity integer, weight float(53), primary key (id))
2025-04-24 13:56:41 [restartedMain] DEBUG org.hibernate.SQL - create table librarians (id integer generated by default as identity, birthday date, name varchar(255), phone varchar(255), surname varchar(255), primary key (id))
2025-04-24 13:56:41 [restartedMain] DEBUG org.hibernate.SQL - create table librarians_book_count (id integer not null, count integer, name varchar(255), primary key (id))
2025-04-24 13:56:41 [restartedMain] DEBUG org.hibernate.SQL - create table student_books (id integer generated by default as identity, book_id integer, due_date date, given_date date, librarian_id integer, student_id integer, primary key (id))
2025-04-24 13:56:41 [restartedMain] DEBUG org.hibernate.SQL - create table students (id integer generated by default as identity, age integer, email varchar(255), librarian_code integer, name varchar(255), surname varchar(255), primary key (id))
2025-04-24 13:56:41 [restartedMain] DEBUG org.hibernate.SQL - create table translates (id integer generated by default as identity, language varchar(255), translate varchar(255), word varchar(255), primary key (id))
2025-04-24 13:56:41 [restartedMain] DEBUG org.hibernate.SQL - create table users (username varchar(255) not null, enabled boolean, password varchar(255), user_id integer, user_type varchar(255), primary key (username))
2025-04-24 13:56:41 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-24 13:56:42 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-04-24 13:56:42 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-04-24 13:56:42 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-04-24 13:56:42 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-04-24 13:56:42 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #12 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) Drop table student_books
2025-04-24 13:56:42 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-04-24 13:56:42 [restartedMain] WARN  o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-224]
2025-04-24 13:56:42 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-04-24 13:56:42 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-04-24 13:56:42 [restartedMain] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-04-24 13:56:42 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-04-24 13:56:42 [restartedMain] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #12 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) Drop table student_books
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:962)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352)
	at az.devolopia.librarian_mubariz_bayramov.LibrarianMubarizBayramovApplication.main(LibrarianMubarizBayramovApplication.java:11)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #12 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) Drop table student_books
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:282)
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254)
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54)
	at org.springframework.boot.jdbc.init.DataSourceScriptDatabaseInitializer.runScripts(DataSourceScriptDatabaseInitializer.java:87)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.runScripts(AbstractScriptDatabaseInitializer.java:146)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyScripts(AbstractScriptDatabaseInitializer.java:108)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyDataScripts(AbstractScriptDatabaseInitializer.java:102)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.initializeDatabase(AbstractScriptDatabaseInitializer.java:77)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.afterPropertiesSet(AbstractScriptDatabaseInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784)
	... 21 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) [*]Drop table student_books"; SQL statement:
Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) Drop table student_books [42000-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.message.DbException.getSyntaxError(DbException.java:247)
	at org.h2.command.ParserBase.getSyntaxError(ParserBase.java:748)
	at org.h2.command.Parser.prepareCommand(Parser.java:486)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261)
	... 31 common frames omitted
2025-04-24 13:59:02 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2025-04-24 13:59:02 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - Starting LibrarianMubarizBayramovApplication using Java 21.0.5 with PID 96148 (C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes started by User in C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov)
2025-04-24 13:59:02 [restartedMain] DEBUG a.d.l.LibrarianMubarizBayramovApplication - Running with Spring Boot v3.3.1, Spring v6.1.10
2025-04-24 13:59:02 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - No active profile set, falling back to 1 default profile: "default"
2025-04-24 13:59:02 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-04-24 13:59:02 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-04-24 13:59:02 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-24 13:59:03 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 106 ms. Found 8 JPA repository interfaces.
2025-04-24 13:59:03 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8888 (http)
2025-04-24 13:59:03 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8888"]
2025-04-24 13:59:03 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-04-24 13:59:03 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-04-24 13:59:03 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-04-24 13:59:03 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1682 ms
2025-04-24 13:59:03 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-04-24 13:59:03 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:db user=ROOT
2025-04-24 13:59:03 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-04-24 13:59:03 [restartedMain] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:db'
2025-04-24 13:59:04 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-24 13:59:04 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.2.Final
2025-04-24 13:59:04 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-04-24 13:59:04 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-24 13:59:05 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-04-24 13:59:05 [restartedMain] DEBUG org.hibernate.SQL - create table authorities (id integer generated by default as identity, authority varchar(255), username varchar(255), primary key (id))
2025-04-24 13:59:05 [restartedMain] DEBUG org.hibernate.SQL - create table authority_list (id integer generated by default as identity, authority varchar(255), librarian integer, student integer, primary key (id))
2025-04-24 13:59:05 [restartedMain] DEBUG org.hibernate.SQL - create table books (id integer generated by default as identity, author varchar(255), category_id integer, color varchar(255), description varchar(255), librarian_code integer, name varchar(255), page_count integer, price numeric(38,2), publish_date date, quantity integer, weight float(53), primary key (id))
2025-04-24 13:59:05 [restartedMain] DEBUG org.hibernate.SQL - create table librarians (id integer generated by default as identity, birthday date, name varchar(255), phone varchar(255), surname varchar(255), primary key (id))
2025-04-24 13:59:05 [restartedMain] DEBUG org.hibernate.SQL - create table librarians_book_count (id integer not null, count integer, name varchar(255), primary key (id))
2025-04-24 13:59:05 [restartedMain] DEBUG org.hibernate.SQL - create table student_books (id integer generated by default as identity, book_id integer, due_date date, given_date date, librarian_id integer, student_id integer, primary key (id))
2025-04-24 13:59:05 [restartedMain] DEBUG org.hibernate.SQL - create table students (id integer generated by default as identity, age integer, email varchar(255), librarian_code integer, name varchar(255), surname varchar(255), primary key (id))
2025-04-24 13:59:05 [restartedMain] DEBUG org.hibernate.SQL - create table translates (id integer generated by default as identity, language varchar(255), translate varchar(255), word varchar(255), primary key (id))
2025-04-24 13:59:05 [restartedMain] DEBUG org.hibernate.SQL - create table users (username varchar(255) not null, enabled boolean, password varchar(255), user_id integer, user_type varchar(255), primary key (username))
2025-04-24 13:59:05 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-24 13:59:05 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-04-24 13:59:05 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-04-24 13:59:05 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-04-24 13:59:05 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-04-24 13:59:06 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #12 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) CREATE VIEW student_books AS SELECT s.id AS student_id, s.name AS student_name, b.id AS book_id, b.name AS book_name, sb.given_date, sb.due_date, l.id AS librarian_id, l.name AS librarian_name FROM students s JOIN student_books sb ON sb.student_id = s.id JOIN books b ON b.id = sb.book_id JOIN librarians l ON l.id = sb.librarian_id
2025-04-24 13:59:06 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-04-24 13:59:06 [restartedMain] WARN  o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-224]
2025-04-24 13:59:06 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-04-24 13:59:06 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-04-24 13:59:06 [restartedMain] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-04-24 13:59:06 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-04-24 13:59:06 [restartedMain] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #12 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) CREATE VIEW student_books AS SELECT s.id AS student_id, s.name AS student_name, b.id AS book_id, b.name AS book_name, sb.given_date, sb.due_date, l.id AS librarian_id, l.name AS librarian_name FROM students s JOIN student_books sb ON sb.student_id = s.id JOIN books b ON b.id = sb.book_id JOIN librarians l ON l.id = sb.librarian_id
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:962)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352)
	at az.devolopia.librarian_mubariz_bayramov.LibrarianMubarizBayramovApplication.main(LibrarianMubarizBayramovApplication.java:11)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #12 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) CREATE VIEW student_books AS SELECT s.id AS student_id, s.name AS student_name, b.id AS book_id, b.name AS book_name, sb.given_date, sb.due_date, l.id AS librarian_id, l.name AS librarian_name FROM students s JOIN student_books sb ON sb.student_id = s.id JOIN books b ON b.id = sb.book_id JOIN librarians l ON l.id = sb.librarian_id
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:282)
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254)
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54)
	at org.springframework.boot.jdbc.init.DataSourceScriptDatabaseInitializer.runScripts(DataSourceScriptDatabaseInitializer.java:87)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.runScripts(AbstractScriptDatabaseInitializer.java:146)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyScripts(AbstractScriptDatabaseInitializer.java:108)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyDataScripts(AbstractScriptDatabaseInitializer.java:102)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.initializeDatabase(AbstractScriptDatabaseInitializer.java:77)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.afterPropertiesSet(AbstractScriptDatabaseInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784)
	... 21 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) [*]CREATE VIEW student_books AS SELECT s.id AS student_id, s.name AS student_name, b.id AS book_id, b.name AS book_name, sb.given_date, sb.due_date, l.id AS librarian_id, l.name AS librarian_name FROM students s JOIN student_books sb ON sb.student_id = s.id JOIN books b ON b.id = sb.book_id JOIN librarians l ON l.id = sb.librarian_id"; SQL statement:
Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) CREATE VIEW student_books AS SELECT s.id AS student_id, s.name AS student_name, b.id AS book_id, b.name AS book_name, sb.given_date, sb.due_date, l.id AS librarian_id, l.name AS librarian_name FROM students s JOIN student_books sb ON sb.student_id = s.id JOIN books b ON b.id = sb.book_id JOIN librarians l ON l.id = sb.librarian_id [42000-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.message.DbException.getSyntaxError(DbException.java:247)
	at org.h2.command.ParserBase.getSyntaxError(ParserBase.java:748)
	at org.h2.command.Parser.prepareCommand(Parser.java:486)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261)
	... 31 common frames omitted
2025-04-24 13:59:32 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2025-04-24 13:59:32 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - Starting LibrarianMubarizBayramovApplication using Java 21.0.5 with PID 123936 (C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes started by User in C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov)
2025-04-24 13:59:32 [restartedMain] DEBUG a.d.l.LibrarianMubarizBayramovApplication - Running with Spring Boot v3.3.1, Spring v6.1.10
2025-04-24 13:59:32 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - No active profile set, falling back to 1 default profile: "default"
2025-04-24 13:59:32 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-04-24 13:59:32 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-04-24 13:59:33 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-24 13:59:33 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 104 ms. Found 8 JPA repository interfaces.
2025-04-24 13:59:33 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8888 (http)
2025-04-24 13:59:33 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8888"]
2025-04-24 13:59:33 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-04-24 13:59:33 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-04-24 13:59:33 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-04-24 13:59:33 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1625 ms
2025-04-24 13:59:33 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-04-24 13:59:33 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:db user=ROOT
2025-04-24 13:59:34 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-04-24 13:59:34 [restartedMain] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:db'
2025-04-24 13:59:34 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-24 13:59:34 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.2.Final
2025-04-24 13:59:34 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-04-24 13:59:34 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-24 13:59:35 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-04-24 13:59:35 [restartedMain] DEBUG org.hibernate.SQL - create table authorities (id integer generated by default as identity, authority varchar(255), username varchar(255), primary key (id))
2025-04-24 13:59:35 [restartedMain] DEBUG org.hibernate.SQL - create table authority_list (id integer generated by default as identity, authority varchar(255), librarian integer, student integer, primary key (id))
2025-04-24 13:59:35 [restartedMain] DEBUG org.hibernate.SQL - create table books (id integer generated by default as identity, author varchar(255), category_id integer, color varchar(255), description varchar(255), librarian_code integer, name varchar(255), page_count integer, price numeric(38,2), publish_date date, quantity integer, weight float(53), primary key (id))
2025-04-24 13:59:35 [restartedMain] DEBUG org.hibernate.SQL - create table librarians (id integer generated by default as identity, birthday date, name varchar(255), phone varchar(255), surname varchar(255), primary key (id))
2025-04-24 13:59:35 [restartedMain] DEBUG org.hibernate.SQL - create table librarians_book_count (id integer not null, count integer, name varchar(255), primary key (id))
2025-04-24 13:59:35 [restartedMain] DEBUG org.hibernate.SQL - create table student_books (id integer generated by default as identity, book_id integer, due_date date, given_date date, librarian_id integer, student_id integer, primary key (id))
2025-04-24 13:59:35 [restartedMain] DEBUG org.hibernate.SQL - create table students (id integer generated by default as identity, age integer, email varchar(255), librarian_code integer, name varchar(255), surname varchar(255), primary key (id))
2025-04-24 13:59:35 [restartedMain] DEBUG org.hibernate.SQL - create table translates (id integer generated by default as identity, language varchar(255), translate varchar(255), word varchar(255), primary key (id))
2025-04-24 13:59:35 [restartedMain] DEBUG org.hibernate.SQL - create table users (username varchar(255) not null, enabled boolean, password varchar(255), user_id integer, user_type varchar(255), primary key (username))
2025-04-24 13:59:35 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-24 13:59:35 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-04-24 13:59:35 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-04-24 13:59:35 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-04-24 13:59:35 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-04-24 13:59:36 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #12 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) Drop table student_books
2025-04-24 13:59:36 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-04-24 13:59:36 [restartedMain] WARN  o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-224]
2025-04-24 13:59:36 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-04-24 13:59:36 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-04-24 13:59:36 [restartedMain] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-04-24 13:59:36 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-04-24 13:59:36 [restartedMain] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #12 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) Drop table student_books
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:962)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352)
	at az.devolopia.librarian_mubariz_bayramov.LibrarianMubarizBayramovApplication.main(LibrarianMubarizBayramovApplication.java:11)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #12 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) Drop table student_books
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:282)
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254)
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54)
	at org.springframework.boot.jdbc.init.DataSourceScriptDatabaseInitializer.runScripts(DataSourceScriptDatabaseInitializer.java:87)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.runScripts(AbstractScriptDatabaseInitializer.java:146)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyScripts(AbstractScriptDatabaseInitializer.java:108)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyDataScripts(AbstractScriptDatabaseInitializer.java:102)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.initializeDatabase(AbstractScriptDatabaseInitializer.java:77)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.afterPropertiesSet(AbstractScriptDatabaseInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784)
	... 21 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) [*]Drop table student_books"; SQL statement:
Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) Drop table student_books [42000-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.message.DbException.getSyntaxError(DbException.java:247)
	at org.h2.command.ParserBase.getSyntaxError(ParserBase.java:748)
	at org.h2.command.Parser.prepareCommand(Parser.java:486)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261)
	... 31 common frames omitted
2025-04-24 14:10:21 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2025-04-24 14:10:21 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - Starting LibrarianMubarizBayramovApplication using Java 21.0.5 with PID 121812 (C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes started by User in C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov)
2025-04-24 14:10:21 [restartedMain] DEBUG a.d.l.LibrarianMubarizBayramovApplication - Running with Spring Boot v3.3.1, Spring v6.1.10
2025-04-24 14:10:21 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - No active profile set, falling back to 1 default profile: "default"
2025-04-24 14:10:21 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-04-24 14:10:21 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-04-24 14:10:22 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-24 14:10:22 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 111 ms. Found 8 JPA repository interfaces.
2025-04-24 14:10:23 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8888 (http)
2025-04-24 14:10:23 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8888"]
2025-04-24 14:10:23 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-04-24 14:10:23 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-04-24 14:10:23 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-04-24 14:10:23 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1700 ms
2025-04-24 14:10:23 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-04-24 14:10:23 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:db user=ROOT
2025-04-24 14:10:23 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-04-24 14:10:23 [restartedMain] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:db'
2025-04-24 14:10:23 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-24 14:10:23 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.2.Final
2025-04-24 14:10:23 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-04-24 14:10:24 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-24 14:10:24 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-04-24 14:10:24 [restartedMain] DEBUG org.hibernate.SQL - create table authorities (id integer generated by default as identity, authority varchar(255), username varchar(255), primary key (id))
2025-04-24 14:10:24 [restartedMain] DEBUG org.hibernate.SQL - create table authority_list (id integer generated by default as identity, authority varchar(255), librarian integer, student integer, primary key (id))
2025-04-24 14:10:24 [restartedMain] DEBUG org.hibernate.SQL - create table books (id integer generated by default as identity, author varchar(255), category_id integer, color varchar(255), description varchar(255), librarian_code integer, name varchar(255), page_count integer, price numeric(38,2), publish_date date, quantity integer, weight float(53), primary key (id))
2025-04-24 14:10:24 [restartedMain] DEBUG org.hibernate.SQL - create table librarians (id integer generated by default as identity, birthday date, name varchar(255), phone varchar(255), surname varchar(255), primary key (id))
2025-04-24 14:10:24 [restartedMain] DEBUG org.hibernate.SQL - create table librarians_book_count (id integer not null, count integer, name varchar(255), primary key (id))
2025-04-24 14:10:24 [restartedMain] DEBUG org.hibernate.SQL - create table student_books (id integer generated by default as identity, book_id integer, due_date date, given_date date, librarian_id integer, student_id integer, primary key (id))
2025-04-24 14:10:24 [restartedMain] DEBUG org.hibernate.SQL - create table students (id integer generated by default as identity, age integer, email varchar(255), librarian_code integer, name varchar(255), surname varchar(255), primary key (id))
2025-04-24 14:10:24 [restartedMain] DEBUG org.hibernate.SQL - create table translates (id integer generated by default as identity, language varchar(255), translate varchar(255), word varchar(255), primary key (id))
2025-04-24 14:10:24 [restartedMain] DEBUG org.hibernate.SQL - create table users (username varchar(255) not null, enabled boolean, password varchar(255), user_id integer, user_type varchar(255), primary key (username))
2025-04-24 14:10:24 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-24 14:10:25 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-04-24 14:10:25 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-04-24 14:10:25 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-04-24 14:10:25 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-04-24 14:10:26 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-04-24 14:10:26 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8888"]
2025-04-24 14:10:26 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8888 (http) with context path '/'
2025-04-24 14:10:26 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - Started LibrarianMubarizBayramovApplication in 4.975 seconds (process running for 5.341)
2025-04-24 14:10:27 [http-nio-8888-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-04-24 14:10:27 [http-nio-8888-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-04-24 14:10:27 [http-nio-8888-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-04-24 14:20:47 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2025-04-24 14:20:47 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - Starting LibrarianMubarizBayramovApplication using Java 21.0.5 with PID 114032 (C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes started by User in C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov)
2025-04-24 14:20:47 [restartedMain] DEBUG a.d.l.LibrarianMubarizBayramovApplication - Running with Spring Boot v3.3.1, Spring v6.1.10
2025-04-24 14:20:47 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - No active profile set, falling back to 1 default profile: "default"
2025-04-24 14:20:47 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-04-24 14:20:47 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-04-24 14:20:48 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-24 14:20:48 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 121 ms. Found 8 JPA repository interfaces.
2025-04-24 14:20:48 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8888 (http)
2025-04-24 14:20:49 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8888"]
2025-04-24 14:20:49 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-04-24 14:20:49 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-04-24 14:20:49 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-04-24 14:20:49 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1716 ms
2025-04-24 14:20:49 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-04-24 14:20:49 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:db user=ROOT
2025-04-24 14:20:49 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-04-24 14:20:49 [restartedMain] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:db'
2025-04-24 14:20:49 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-24 14:20:49 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.2.Final
2025-04-24 14:20:49 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-04-24 14:20:49 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-24 14:20:50 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-04-24 14:20:50 [restartedMain] DEBUG org.hibernate.SQL - create table authorities (id integer generated by default as identity, authority varchar(255), username varchar(255), primary key (id))
2025-04-24 14:20:50 [restartedMain] DEBUG org.hibernate.SQL - create table authority_list (id integer generated by default as identity, authority varchar(255), librarian integer, student integer, primary key (id))
2025-04-24 14:20:50 [restartedMain] DEBUG org.hibernate.SQL - create table books (id integer generated by default as identity, author varchar(255), category_id integer, color varchar(255), description varchar(255), librarian_code integer, name varchar(255), page_count integer, price numeric(38,2), publish_date date, quantity integer, weight float(53), primary key (id))
2025-04-24 14:20:50 [restartedMain] DEBUG org.hibernate.SQL - create table librarians (id integer generated by default as identity, birthday date, name varchar(255), phone varchar(255), surname varchar(255), primary key (id))
2025-04-24 14:20:50 [restartedMain] DEBUG org.hibernate.SQL - create table librarians_book_count (id integer not null, count integer, name varchar(255), primary key (id))
2025-04-24 14:20:50 [restartedMain] DEBUG org.hibernate.SQL - create table student_books (id integer generated by default as identity, book_id integer, due_date date, given_date date, librarian_id integer, student_id integer, primary key (id))
2025-04-24 14:20:50 [restartedMain] DEBUG org.hibernate.SQL - create table students (id integer generated by default as identity, age integer, email varchar(255), librarian_code integer, name varchar(255), surname varchar(255), primary key (id))
2025-04-24 14:20:50 [restartedMain] DEBUG org.hibernate.SQL - create table translates (id integer generated by default as identity, language varchar(255), translate varchar(255), word varchar(255), primary key (id))
2025-04-24 14:20:50 [restartedMain] DEBUG org.hibernate.SQL - create table users (username varchar(255) not null, enabled boolean, password varchar(255), user_id integer, user_type varchar(255), primary key (username))
2025-04-24 14:20:50 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-24 14:20:50 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-04-24 14:20:51 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-04-24 14:20:51 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-04-24 14:20:51 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-04-24 14:20:51 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-04-24 14:20:51 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8888"]
2025-04-24 14:20:51 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8888 (http) with context path '/'
2025-04-24 14:20:51 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - Started LibrarianMubarizBayramovApplication in 4.968 seconds (process running for 5.327)
2025-04-24 14:20:54 [http-nio-8888-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-04-24 14:20:54 [http-nio-8888-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-04-24 14:20:54 [http-nio-8888-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-04-24 14:22:11 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2025-04-24 14:22:11 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - Starting LibrarianMubarizBayramovApplication using Java 21.0.5 with PID 82528 (C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes started by User in C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov)
2025-04-24 14:22:11 [restartedMain] DEBUG a.d.l.LibrarianMubarizBayramovApplication - Running with Spring Boot v3.3.1, Spring v6.1.10
2025-04-24 14:22:11 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - No active profile set, falling back to 1 default profile: "default"
2025-04-24 14:22:11 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-04-24 14:22:11 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-04-24 14:22:12 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-24 14:22:12 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 109 ms. Found 8 JPA repository interfaces.
2025-04-24 14:22:13 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8888 (http)
2025-04-24 14:22:13 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8888"]
2025-04-24 14:22:13 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-04-24 14:22:13 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-04-24 14:22:13 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-04-24 14:22:13 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1744 ms
2025-04-24 14:22:13 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-04-24 14:22:13 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:db user=ROOT
2025-04-24 14:22:13 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-04-24 14:22:13 [restartedMain] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:db'
2025-04-24 14:22:13 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-24 14:22:13 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.2.Final
2025-04-24 14:22:13 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-04-24 14:22:13 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-24 14:22:14 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-04-24 14:22:14 [restartedMain] DEBUG org.hibernate.SQL - create table authorities (id integer generated by default as identity, authority varchar(255), username varchar(255), primary key (id))
2025-04-24 14:22:14 [restartedMain] DEBUG org.hibernate.SQL - create table authority_list (id integer generated by default as identity, authority varchar(255), librarian integer, student integer, primary key (id))
2025-04-24 14:22:14 [restartedMain] DEBUG org.hibernate.SQL - create table books (id integer generated by default as identity, author varchar(255), category_id integer, color varchar(255), description varchar(255), librarian_code integer, name varchar(255), page_count integer, price numeric(38,2), publish_date date, quantity integer, weight float(53), primary key (id))
2025-04-24 14:22:14 [restartedMain] DEBUG org.hibernate.SQL - create table librarians (id integer generated by default as identity, birthday date, name varchar(255), phone varchar(255), surname varchar(255), primary key (id))
2025-04-24 14:22:14 [restartedMain] DEBUG org.hibernate.SQL - create table librarians_book_count (id integer not null, count integer, name varchar(255), primary key (id))
2025-04-24 14:22:14 [restartedMain] DEBUG org.hibernate.SQL - create table student_books (id integer generated by default as identity, book_id integer, due_date date, given_date date, librarian_id integer, student_id integer, primary key (id))
2025-04-24 14:22:14 [restartedMain] DEBUG org.hibernate.SQL - create table students (id integer generated by default as identity, age integer, email varchar(255), librarian_code integer, name varchar(255), surname varchar(255), primary key (id))
2025-04-24 14:22:14 [restartedMain] DEBUG org.hibernate.SQL - create table translates (id integer generated by default as identity, language varchar(255), translate varchar(255), word varchar(255), primary key (id))
2025-04-24 14:22:14 [restartedMain] DEBUG org.hibernate.SQL - create table users (username varchar(255) not null, enabled boolean, password varchar(255), user_id integer, user_type varchar(255), primary key (username))
2025-04-24 14:22:14 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-24 14:22:14 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-04-24 14:22:15 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-04-24 14:22:15 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-04-24 14:22:15 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-04-24 14:22:15 [restartedMain] WARN  o.s.b.d.a.OptionalLiveReloadServer - Unable to start LiveReload server
2025-04-24 14:22:15 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8888"]
2025-04-24 14:22:15 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'
2025-04-24 14:22:15 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-04-24 14:22:15 [restartedMain] WARN  o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-224]
2025-04-24 14:22:15 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-04-24 14:22:15 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-04-24 14:22:15 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-04-24 14:22:15 [restartedMain] ERROR o.s.b.d.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 8888 was already in use.

Action:

Identify and stop the process that's listening on port 8888 or configure this application to listen on another port.

2025-04-24 14:23:36 [http-nio-8888-exec-5] WARN  o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'GET' is not supported]
2025-04-24 14:34:53 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2025-04-24 14:34:53 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - Starting LibrarianMubarizBayramovApplication using Java 21.0.5 with PID 122532 (C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes started by User in C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov)
2025-04-24 14:34:53 [restartedMain] DEBUG a.d.l.LibrarianMubarizBayramovApplication - Running with Spring Boot v3.3.1, Spring v6.1.10
2025-04-24 14:34:53 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - No active profile set, falling back to 1 default profile: "default"
2025-04-24 14:34:53 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-04-24 14:34:53 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-04-24 14:34:54 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-24 14:34:54 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 102 ms. Found 8 JPA repository interfaces.
2025-04-24 14:34:55 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8888 (http)
2025-04-24 14:34:55 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8888"]
2025-04-24 14:34:55 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-04-24 14:34:55 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-04-24 14:34:55 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-04-24 14:34:55 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1641 ms
2025-04-24 14:34:55 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-04-24 14:34:55 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:db user=ROOT
2025-04-24 14:34:55 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-04-24 14:34:55 [restartedMain] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:db'
2025-04-24 14:34:55 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-24 14:34:55 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.2.Final
2025-04-24 14:34:55 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-04-24 14:34:56 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-24 14:34:56 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-04-24 14:34:56 [restartedMain] DEBUG org.hibernate.SQL - create table authorities (id integer generated by default as identity, authority varchar(255), username varchar(255), primary key (id))
2025-04-24 14:34:56 [restartedMain] DEBUG org.hibernate.SQL - create table authority_list (id integer generated by default as identity, authority varchar(255), librarian integer, student integer, primary key (id))
2025-04-24 14:34:56 [restartedMain] DEBUG org.hibernate.SQL - create table books (id integer generated by default as identity, author varchar(255), category_id integer, color varchar(255), description varchar(255), librarian_code integer, name varchar(255), page_count integer, price numeric(38,2), publish_date date, quantity integer, weight float(53), primary key (id))
2025-04-24 14:34:56 [restartedMain] DEBUG org.hibernate.SQL - create table librarians (id integer generated by default as identity, birthday date, name varchar(255), phone varchar(255), surname varchar(255), primary key (id))
2025-04-24 14:34:56 [restartedMain] DEBUG org.hibernate.SQL - create table librarians_book_count (id integer not null, count integer, name varchar(255), primary key (id))
2025-04-24 14:34:56 [restartedMain] DEBUG org.hibernate.SQL - create table student_books (id integer generated by default as identity, book_id integer, due_date date, given_date date, librarian_id integer, student_id integer, primary key (id))
2025-04-24 14:34:56 [restartedMain] DEBUG org.hibernate.SQL - create table students (id integer generated by default as identity, age integer, email varchar(255), librarian_code integer, name varchar(255), surname varchar(255), primary key (id))
2025-04-24 14:34:56 [restartedMain] DEBUG org.hibernate.SQL - create table translates (id integer generated by default as identity, language varchar(255), translate varchar(255), word varchar(255), primary key (id))
2025-04-24 14:34:56 [restartedMain] DEBUG org.hibernate.SQL - create table users (username varchar(255) not null, enabled boolean, password varchar(255), user_id integer, user_type varchar(255), primary key (username))
2025-04-24 14:34:56 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-24 14:34:57 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-04-24 14:34:57 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-04-24 14:34:57 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-04-24 14:34:57 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-04-24 14:34:57 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-04-24 14:34:58 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8888"]
2025-04-24 14:34:58 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8888 (http) with context path '/'
2025-04-24 14:34:58 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - Started LibrarianMubarizBayramovApplication in 4.606 seconds (process running for 4.95)
2025-04-24 15:03:45 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2025-04-24 15:03:45 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - Starting LibrarianMubarizBayramovApplication using Java 21.0.5 with PID 113368 (C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes started by User in C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov)
2025-04-24 15:03:45 [restartedMain] DEBUG a.d.l.LibrarianMubarizBayramovApplication - Running with Spring Boot v3.3.1, Spring v6.1.10
2025-04-24 15:03:45 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - No active profile set, falling back to 1 default profile: "default"
2025-04-24 15:03:45 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-04-24 15:03:45 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-04-24 15:03:47 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-24 15:03:47 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 234 ms. Found 8 JPA repository interfaces.
2025-04-24 15:03:48 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8888 (http)
2025-04-24 15:03:48 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8888"]
2025-04-24 15:03:48 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-04-24 15:03:48 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-04-24 15:03:48 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-04-24 15:03:48 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3443 ms
2025-04-24 15:03:48 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-04-24 15:03:49 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:db user=ROOT
2025-04-24 15:03:49 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-04-24 15:03:49 [restartedMain] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:db'
2025-04-24 15:03:49 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-24 15:03:49 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.2.Final
2025-04-24 15:03:49 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-04-24 15:03:49 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-24 15:03:51 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-04-24 15:03:51 [restartedMain] DEBUG org.hibernate.SQL - create table authorities (id integer generated by default as identity, authority varchar(255), username varchar(255), primary key (id))
2025-04-24 15:03:51 [restartedMain] DEBUG org.hibernate.SQL - create table authority_list (id integer generated by default as identity, authority varchar(255), librarian integer, student integer, primary key (id))
2025-04-24 15:03:51 [restartedMain] DEBUG org.hibernate.SQL - create table books (id integer generated by default as identity, author varchar(255), category_id integer, color varchar(255), description varchar(255), librarian_code integer, name varchar(255), page_count integer, price numeric(38,2), publish_date date, quantity integer, weight float(53), primary key (id))
2025-04-24 15:03:51 [restartedMain] DEBUG org.hibernate.SQL - create table librarians (id integer generated by default as identity, birthday date, name varchar(255), phone varchar(255), surname varchar(255), primary key (id))
2025-04-24 15:03:51 [restartedMain] DEBUG org.hibernate.SQL - create table librarians_book_count (id integer not null, count integer, name varchar(255), primary key (id))
2025-04-24 15:03:51 [restartedMain] DEBUG org.hibernate.SQL - create table student_books (id integer generated by default as identity, book_id integer, due_date date, given_date date, librarian_id integer, student_id integer, primary key (id))
2025-04-24 15:03:51 [restartedMain] DEBUG org.hibernate.SQL - create table students (id integer generated by default as identity, age integer, email varchar(255), librarian_code integer, name varchar(255), surname varchar(255), primary key (id))
2025-04-24 15:03:51 [restartedMain] DEBUG org.hibernate.SQL - create table translates (id integer generated by default as identity, language varchar(255), translate varchar(255), word varchar(255), primary key (id))
2025-04-24 15:03:51 [restartedMain] DEBUG org.hibernate.SQL - create table users (username varchar(255) not null, enabled boolean, password varchar(255), user_id integer, user_type varchar(255), primary key (username))
2025-04-24 15:03:51 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-24 15:03:52 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-04-24 15:03:53 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-04-24 15:03:53 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-04-24 15:03:53 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-04-24 15:03:54 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-04-24 15:03:54 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8888"]
2025-04-24 15:03:54 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8888 (http) with context path '/'
2025-04-24 15:03:54 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - Started LibrarianMubarizBayramovApplication in 10.51 seconds (process running for 11.313)
2025-04-24 15:04:04 [http-nio-8888-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-04-24 15:04:04 [http-nio-8888-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-04-24 15:04:04 [http-nio-8888-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-04-24 15:08:31 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2025-04-24 15:08:31 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - Starting LibrarianMubarizBayramovApplication using Java 21.0.5 with PID 105212 (C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes started by User in C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov)
2025-04-24 15:08:31 [restartedMain] DEBUG a.d.l.LibrarianMubarizBayramovApplication - Running with Spring Boot v3.3.1, Spring v6.1.10
2025-04-24 15:08:31 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - No active profile set, falling back to 1 default profile: "default"
2025-04-24 15:08:31 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-04-24 15:08:31 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-04-24 15:08:33 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-24 15:08:33 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 225 ms. Found 8 JPA repository interfaces.
2025-04-24 15:08:34 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8888 (http)
2025-04-24 15:08:34 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8888"]
2025-04-24 15:08:34 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-04-24 15:08:34 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-04-24 15:08:34 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-04-24 15:08:34 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3202 ms
2025-04-24 15:08:34 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-04-24 15:08:34 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:db user=ROOT
2025-04-24 15:08:34 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-04-24 15:08:34 [restartedMain] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:db'
2025-04-24 15:08:35 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-24 15:08:35 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.2.Final
2025-04-24 15:08:35 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-04-24 15:08:35 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-24 15:08:37 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-04-24 15:08:37 [restartedMain] DEBUG org.hibernate.SQL - create table authorities (id integer generated by default as identity, authority varchar(255), username varchar(255), primary key (id))
2025-04-24 15:08:37 [restartedMain] DEBUG org.hibernate.SQL - create table authority_list (id integer generated by default as identity, authority varchar(255), librarian integer, student integer, primary key (id))
2025-04-24 15:08:37 [restartedMain] DEBUG org.hibernate.SQL - create table books (id integer generated by default as identity, author varchar(255), category_id integer, color varchar(255), description varchar(255), librarian_code integer, name varchar(255), page_count integer, price numeric(38,2), publish_date date, quantity integer, weight float(53), primary key (id))
2025-04-24 15:08:37 [restartedMain] DEBUG org.hibernate.SQL - create table librarians (id integer generated by default as identity, birthday date, name varchar(255), phone varchar(255), surname varchar(255), primary key (id))
2025-04-24 15:08:37 [restartedMain] DEBUG org.hibernate.SQL - create table librarians_book_count (id integer not null, count integer, name varchar(255), primary key (id))
2025-04-24 15:08:37 [restartedMain] DEBUG org.hibernate.SQL - create table student_books (id integer generated by default as identity, book_id integer, due_date date, given_date date, librarian_id integer, student_id integer, primary key (id))
2025-04-24 15:08:37 [restartedMain] DEBUG org.hibernate.SQL - create table students (id integer generated by default as identity, age integer, email varchar(255), librarian_code integer, name varchar(255), surname varchar(255), primary key (id))
2025-04-24 15:08:37 [restartedMain] DEBUG org.hibernate.SQL - create table translates (id integer generated by default as identity, language varchar(255), translate varchar(255), word varchar(255), primary key (id))
2025-04-24 15:08:37 [restartedMain] DEBUG org.hibernate.SQL - create table users (username varchar(255) not null, enabled boolean, password varchar(255), user_id integer, user_type varchar(255), primary key (username))
2025-04-24 15:08:37 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-24 15:08:38 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-04-24 15:08:38 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-04-24 15:08:38 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-04-24 15:08:38 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-04-24 15:08:39 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-04-24 15:08:39 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8888"]
2025-04-24 15:08:39 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8888 (http) with context path '/'
2025-04-24 15:08:40 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - Started LibrarianMubarizBayramovApplication in 9.522 seconds (process running for 10.336)
2025-04-24 15:08:43 [http-nio-8888-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-04-24 15:08:43 [http-nio-8888-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-04-24 15:08:43 [http-nio-8888-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-04-24 15:12:00 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2025-04-24 15:12:00 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - Starting LibrarianMubarizBayramovApplication using Java 21.0.5 with PID 118464 (C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes started by User in C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov)
2025-04-24 15:12:00 [restartedMain] DEBUG a.d.l.LibrarianMubarizBayramovApplication - Running with Spring Boot v3.3.1, Spring v6.1.10
2025-04-24 15:12:00 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - No active profile set, falling back to 1 default profile: "default"
2025-04-24 15:12:00 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-04-24 15:12:00 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-04-24 15:12:01 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-24 15:12:02 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 220 ms. Found 8 JPA repository interfaces.
2025-04-24 15:12:03 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8888 (http)
2025-04-24 15:12:03 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8888"]
2025-04-24 15:12:03 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-04-24 15:12:03 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-04-24 15:12:03 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-04-24 15:12:03 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3341 ms
2025-04-24 15:12:03 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-04-24 15:12:03 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:db user=ROOT
2025-04-24 15:12:03 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-04-24 15:12:03 [restartedMain] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:db'
2025-04-24 15:12:04 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-24 15:12:04 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.2.Final
2025-04-24 15:12:04 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-04-24 15:12:04 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-24 15:12:06 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-04-24 15:12:06 [restartedMain] DEBUG org.hibernate.SQL - create table authorities (id integer generated by default as identity, authority varchar(255), username varchar(255), primary key (id))
2025-04-24 15:12:06 [restartedMain] DEBUG org.hibernate.SQL - create table authority_list (id integer generated by default as identity, authority varchar(255), librarian integer, student integer, primary key (id))
2025-04-24 15:12:06 [restartedMain] DEBUG org.hibernate.SQL - create table books (id integer generated by default as identity, author varchar(255), category_id integer, color varchar(255), description varchar(255), librarian_code integer, name varchar(255), page_count integer, price numeric(38,2), publish_date date, quantity integer, weight float(53), primary key (id))
2025-04-24 15:12:06 [restartedMain] DEBUG org.hibernate.SQL - create table librarians (id integer generated by default as identity, birthday date, name varchar(255), phone varchar(255), surname varchar(255), primary key (id))
2025-04-24 15:12:06 [restartedMain] DEBUG org.hibernate.SQL - create table librarians_book_count (id integer not null, count integer, name varchar(255), primary key (id))
2025-04-24 15:12:06 [restartedMain] DEBUG org.hibernate.SQL - create table student_books (id integer generated by default as identity, book_id integer, due_date date, given_date date, librarian_id integer, student_id integer, primary key (id))
2025-04-24 15:12:06 [restartedMain] DEBUG org.hibernate.SQL - create table students (id integer generated by default as identity, age integer, email varchar(255), librarian_code integer, name varchar(255), surname varchar(255), primary key (id))
2025-04-24 15:12:06 [restartedMain] DEBUG org.hibernate.SQL - create table translates (id integer generated by default as identity, language varchar(255), translate varchar(255), word varchar(255), primary key (id))
2025-04-24 15:12:06 [restartedMain] DEBUG org.hibernate.SQL - create table users (username varchar(255) not null, enabled boolean, password varchar(255), user_id integer, user_type varchar(255), primary key (username))
2025-04-24 15:12:06 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-24 15:12:07 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-04-24 15:12:07 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-04-24 15:12:08 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-04-24 15:12:08 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-04-24 15:12:08 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-04-24 15:12:09 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8888"]
2025-04-24 15:12:09 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8888 (http) with context path '/'
2025-04-24 15:12:09 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - Started LibrarianMubarizBayramovApplication in 9.91 seconds (process running for 10.774)
2025-04-24 15:12:11 [http-nio-8888-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-04-24 15:12:11 [http-nio-8888-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-04-24 15:12:11 [http-nio-8888-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-04-24 15:13:54 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2025-04-24 15:13:54 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - Starting LibrarianMubarizBayramovApplication using Java 21.0.5 with PID 12964 (C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes started by User in C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov)
2025-04-24 15:13:54 [restartedMain] DEBUG a.d.l.LibrarianMubarizBayramovApplication - Running with Spring Boot v3.3.1, Spring v6.1.10
2025-04-24 15:13:54 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - No active profile set, falling back to 1 default profile: "default"
2025-04-24 15:13:54 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-04-24 15:13:54 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-04-24 15:13:56 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-24 15:13:56 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 231 ms. Found 8 JPA repository interfaces.
2025-04-24 15:13:58 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8888 (http)
2025-04-24 15:13:58 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8888"]
2025-04-24 15:13:58 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-04-24 15:13:58 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-04-24 15:13:58 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-04-24 15:13:58 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3752 ms
2025-04-24 15:13:58 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-04-24 15:13:58 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:db user=ROOT
2025-04-24 15:13:58 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-04-24 15:13:58 [restartedMain] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:db'
2025-04-24 15:13:59 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-24 15:13:59 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.2.Final
2025-04-24 15:13:59 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-04-24 15:13:59 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-24 15:14:01 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-04-24 15:14:01 [restartedMain] DEBUG org.hibernate.SQL - create table authorities (id integer generated by default as identity, authority varchar(255), username varchar(255), primary key (id))
2025-04-24 15:14:01 [restartedMain] DEBUG org.hibernate.SQL - create table authority_list (id integer generated by default as identity, authority varchar(255), librarian integer, student integer, primary key (id))
2025-04-24 15:14:01 [restartedMain] DEBUG org.hibernate.SQL - create table books (id integer generated by default as identity, author varchar(255), category_id integer, color varchar(255), description varchar(255), librarian_code integer, name varchar(255), page_count integer, price numeric(38,2), publish_date date, quantity integer, weight float(53), primary key (id))
2025-04-24 15:14:01 [restartedMain] DEBUG org.hibernate.SQL - create table librarians (id integer generated by default as identity, birthday date, name varchar(255), phone varchar(255), surname varchar(255), primary key (id))
2025-04-24 15:14:01 [restartedMain] DEBUG org.hibernate.SQL - create table librarians_book_count (id integer not null, count integer, name varchar(255), primary key (id))
2025-04-24 15:14:01 [restartedMain] DEBUG org.hibernate.SQL - create table student_books (id integer generated by default as identity, book_id integer, due_date date, given_date date, librarian_id integer, student_id integer, primary key (id))
2025-04-24 15:14:01 [restartedMain] DEBUG org.hibernate.SQL - create table students (id integer generated by default as identity, age integer, email varchar(255), librarian_code integer, name varchar(255), surname varchar(255), primary key (id))
2025-04-24 15:14:01 [restartedMain] DEBUG org.hibernate.SQL - create table translates (id integer generated by default as identity, language varchar(255), translate varchar(255), word varchar(255), primary key (id))
2025-04-24 15:14:01 [restartedMain] DEBUG org.hibernate.SQL - create table users (username varchar(255) not null, enabled boolean, password varchar(255), user_id integer, user_type varchar(255), primary key (username))
2025-04-24 15:14:01 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-24 15:14:01 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-04-24 15:41:17 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2025-04-24 15:41:17 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - Starting LibrarianMubarizBayramovApplication using Java 21.0.5 with PID 122688 (C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes started by User in C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov)
2025-04-24 15:41:17 [restartedMain] DEBUG a.d.l.LibrarianMubarizBayramovApplication - Running with Spring Boot v3.3.1, Spring v6.1.10
2025-04-24 15:41:17 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - No active profile set, falling back to 1 default profile: "default"
2025-04-24 15:41:17 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-04-24 15:41:17 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-04-24 15:41:18 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-24 15:41:18 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 117 ms. Found 8 JPA repository interfaces.
2025-04-24 15:41:19 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8888 (http)
2025-04-24 15:41:19 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8888"]
2025-04-24 15:41:19 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-04-24 15:41:19 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-04-24 15:41:19 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-04-24 15:41:19 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1704 ms
2025-04-24 15:41:19 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-04-24 15:41:19 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:db user=ROOT
2025-04-24 15:41:19 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-04-24 15:41:19 [restartedMain] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:db'
2025-04-24 15:41:19 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-24 15:41:19 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.2.Final
2025-04-24 15:41:19 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-04-24 15:41:20 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-24 15:41:20 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-04-24 15:41:21 [restartedMain] DEBUG org.hibernate.SQL - create table authorities (id integer generated by default as identity, authority varchar(255), username varchar(255), primary key (id))
2025-04-24 15:41:21 [restartedMain] DEBUG org.hibernate.SQL - create table authority_list (id integer generated by default as identity, authority varchar(255), librarian integer, student integer, primary key (id))
2025-04-24 15:41:21 [restartedMain] DEBUG org.hibernate.SQL - create table books (id integer generated by default as identity, author varchar(255), category_id integer, color varchar(255), description varchar(255), librarian_code integer, name varchar(255), page_count integer, price numeric(38,2), publish_date date, quantity integer, weight float(53), primary key (id))
2025-04-24 15:41:21 [restartedMain] DEBUG org.hibernate.SQL - create table librarians (id integer generated by default as identity, birthday date, name varchar(255), phone varchar(255), surname varchar(255), primary key (id))
2025-04-24 15:41:21 [restartedMain] DEBUG org.hibernate.SQL - create table librarians_book_count (id integer not null, count integer, name varchar(255), primary key (id))
2025-04-24 15:41:21 [restartedMain] DEBUG org.hibernate.SQL - create table student_books (id integer generated by default as identity, book_id integer, due_date date, given_date date, librarian_id integer, student_id integer, primary key (id))
2025-04-24 15:41:21 [restartedMain] DEBUG org.hibernate.SQL - create table students (id integer generated by default as identity, age integer, email varchar(255), librarian_code integer, name varchar(255), surname varchar(255), primary key (id))
2025-04-24 15:41:21 [restartedMain] DEBUG org.hibernate.SQL - create table translates (id integer generated by default as identity, language varchar(255), translate varchar(255), word varchar(255), primary key (id))
2025-04-24 15:41:21 [restartedMain] DEBUG org.hibernate.SQL - create table users (username varchar(255) not null, enabled boolean, password varchar(255), user_id integer, user_type varchar(255), primary key (username))
2025-04-24 15:41:21 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-24 15:41:21 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-04-24 15:41:21 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-04-24 15:41:21 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-04-24 15:41:21 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-04-24 15:41:22 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #12 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) CREATE VIEW student_books AS SELECT sb.id AS student_book_id, sb.studentId, sb.bookId, sb.givenDate, sb.dueDate, sb.librarianId, s.name AS student_name, s.surname AS student_surname, s.email AS student_email, s.age AS student_age, b.name AS book_name, b.author AS book_author, b.price AS book_price, b.publishDate AS book_publish_date, b.pageCount AS book_page_count, l.name AS librarian_name, l.surname AS librarian_surname FROM student_books sb JOIN students s ON sb.studentId = s.id JOIN books b ON sb.bookId = b.id JOIN librarians l ON sb.librarianId = l.id
2025-04-24 15:41:22 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-04-24 15:41:22 [restartedMain] WARN  o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-224]
2025-04-24 15:41:22 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-04-24 15:41:22 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-04-24 15:41:22 [restartedMain] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-04-24 15:41:22 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-04-24 15:41:22 [restartedMain] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #12 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) CREATE VIEW student_books AS SELECT sb.id AS student_book_id, sb.studentId, sb.bookId, sb.givenDate, sb.dueDate, sb.librarianId, s.name AS student_name, s.surname AS student_surname, s.email AS student_email, s.age AS student_age, b.name AS book_name, b.author AS book_author, b.price AS book_price, b.publishDate AS book_publish_date, b.pageCount AS book_page_count, l.name AS librarian_name, l.surname AS librarian_surname FROM student_books sb JOIN students s ON sb.studentId = s.id JOIN books b ON sb.bookId = b.id JOIN librarians l ON sb.librarianId = l.id
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:962)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352)
	at az.devolopia.librarian_mubariz_bayramov.LibrarianMubarizBayramovApplication.main(LibrarianMubarizBayramovApplication.java:11)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #12 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) CREATE VIEW student_books AS SELECT sb.id AS student_book_id, sb.studentId, sb.bookId, sb.givenDate, sb.dueDate, sb.librarianId, s.name AS student_name, s.surname AS student_surname, s.email AS student_email, s.age AS student_age, b.name AS book_name, b.author AS book_author, b.price AS book_price, b.publishDate AS book_publish_date, b.pageCount AS book_page_count, l.name AS librarian_name, l.surname AS librarian_surname FROM student_books sb JOIN students s ON sb.studentId = s.id JOIN books b ON sb.bookId = b.id JOIN librarians l ON sb.librarianId = l.id
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:282)
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254)
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54)
	at org.springframework.boot.jdbc.init.DataSourceScriptDatabaseInitializer.runScripts(DataSourceScriptDatabaseInitializer.java:87)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.runScripts(AbstractScriptDatabaseInitializer.java:146)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyScripts(AbstractScriptDatabaseInitializer.java:108)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyDataScripts(AbstractScriptDatabaseInitializer.java:102)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.initializeDatabase(AbstractScriptDatabaseInitializer.java:77)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.afterPropertiesSet(AbstractScriptDatabaseInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784)
	... 21 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) [*]CREATE VIEW student_books AS SELECT sb.id AS student_book_id, sb.studentId, sb.bookId, sb.givenDate, sb.dueDate, sb.librarianId, s.name AS student_name, s.surname AS student_surname, s.email AS student_email, s.age AS student_age, b.name AS book_name, b.author AS book_author, b.price AS book_price, b.publishDate AS book_publish_date, b.pageCount AS book_page_count, l.name AS librarian_name, l.surname AS librarian_surname FROM student_books sb JOIN students s ON sb.studentId = s.id JOIN books b ON sb.bookId = b.id JOIN librarians l ON sb.librarianId = l.id"; SQL statement:
Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) CREATE VIEW student_books AS SELECT sb.id AS student_book_id, sb.studentId, sb.bookId, sb.givenDate, sb.dueDate, sb.librarianId, s.name AS student_name, s.surname AS student_surname, s.email AS student_email, s.age AS student_age, b.name AS book_name, b.author AS book_author, b.price AS book_price, b.publishDate AS book_publish_date, b.pageCount AS book_page_count, l.name AS librarian_name, l.surname AS librarian_surname FROM student_books sb JOIN students s ON sb.studentId = s.id JOIN books b ON sb.bookId = b.id JOIN librarians l ON sb.librarianId = l.id [42000-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.message.DbException.getSyntaxError(DbException.java:247)
	at org.h2.command.ParserBase.getSyntaxError(ParserBase.java:748)
	at org.h2.command.Parser.prepareCommand(Parser.java:486)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261)
	... 31 common frames omitted
2025-04-24 15:41:54 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2025-04-24 15:41:54 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - Starting LibrarianMubarizBayramovApplication using Java 21.0.5 with PID 111216 (C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes started by User in C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov)
2025-04-24 15:41:54 [restartedMain] DEBUG a.d.l.LibrarianMubarizBayramovApplication - Running with Spring Boot v3.3.1, Spring v6.1.10
2025-04-24 15:41:54 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - No active profile set, falling back to 1 default profile: "default"
2025-04-24 15:41:54 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-04-24 15:41:54 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-04-24 15:41:55 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-24 15:41:55 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 113 ms. Found 8 JPA repository interfaces.
2025-04-24 15:41:56 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8888 (http)
2025-04-24 15:41:56 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8888"]
2025-04-24 15:41:56 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-04-24 15:41:56 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-04-24 15:41:56 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-04-24 15:41:56 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1658 ms
2025-04-24 15:41:56 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-04-24 15:41:56 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:db user=ROOT
2025-04-24 15:41:56 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-04-24 15:41:56 [restartedMain] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:db'
2025-04-24 15:41:56 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-24 15:41:56 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.2.Final
2025-04-24 15:41:56 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-04-24 15:41:56 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-24 15:42:17 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2025-04-24 15:42:17 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - Starting LibrarianMubarizBayramovApplication using Java 21.0.5 with PID 125984 (C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes started by User in C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov)
2025-04-24 15:42:17 [restartedMain] DEBUG a.d.l.LibrarianMubarizBayramovApplication - Running with Spring Boot v3.3.1, Spring v6.1.10
2025-04-24 15:42:17 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - No active profile set, falling back to 1 default profile: "default"
2025-04-24 15:42:17 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-04-24 15:42:17 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-04-24 15:42:18 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-24 15:42:18 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 105 ms. Found 8 JPA repository interfaces.
2025-04-24 15:42:18 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8888 (http)
2025-04-24 15:42:18 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8888"]
2025-04-24 15:42:18 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-04-24 15:42:18 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-04-24 15:42:19 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-04-24 15:42:19 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1654 ms
2025-04-24 15:42:19 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-04-24 15:42:19 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:db user=ROOT
2025-04-24 15:42:19 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-04-24 15:42:19 [restartedMain] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:db'
2025-04-24 15:42:19 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-24 15:42:19 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.2.Final
2025-04-24 15:42:19 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-04-24 15:42:19 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-24 15:42:20 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-04-24 15:42:20 [restartedMain] DEBUG org.hibernate.SQL - create table authorities (id integer generated by default as identity, authority varchar(255), username varchar(255), primary key (id))
2025-04-24 15:42:20 [restartedMain] DEBUG org.hibernate.SQL - create table authority_list (id integer generated by default as identity, authority varchar(255), librarian integer, student integer, primary key (id))
2025-04-24 15:42:20 [restartedMain] DEBUG org.hibernate.SQL - create table books (id integer generated by default as identity, author varchar(255), category_id integer, color varchar(255), description varchar(255), librarian_code integer, name varchar(255), page_count integer, price numeric(38,2), publish_date date, quantity integer, weight float(53), primary key (id))
2025-04-24 15:42:20 [restartedMain] DEBUG org.hibernate.SQL - create table librarians (id integer generated by default as identity, birthday date, name varchar(255), phone varchar(255), surname varchar(255), primary key (id))
2025-04-24 15:42:20 [restartedMain] DEBUG org.hibernate.SQL - create table librarians_book_count (id integer not null, count integer, name varchar(255), primary key (id))
2025-04-24 15:42:20 [restartedMain] DEBUG org.hibernate.SQL - create table student_books (id integer generated by default as identity, book_id integer, due_date date, given_date date, librarian_id integer, student_id integer, primary key (id))
2025-04-24 15:42:20 [restartedMain] DEBUG org.hibernate.SQL - create table students (id integer generated by default as identity, age integer, email varchar(255), librarian_code integer, name varchar(255), surname varchar(255), primary key (id))
2025-04-24 15:42:20 [restartedMain] DEBUG org.hibernate.SQL - create table translates (id integer generated by default as identity, language varchar(255), translate varchar(255), word varchar(255), primary key (id))
2025-04-24 15:42:20 [restartedMain] DEBUG org.hibernate.SQL - create table users (username varchar(255) not null, enabled boolean, password varchar(255), user_id integer, user_type varchar(255), primary key (username))
2025-04-24 15:42:20 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-24 15:42:20 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-04-24 15:42:20 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-04-24 15:42:21 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-04-24 15:42:21 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-04-24 15:42:21 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #12 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) Drop table student_books
2025-04-24 15:42:21 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-04-24 15:42:21 [restartedMain] WARN  o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-224]
2025-04-24 15:42:21 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-04-24 15:42:21 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-04-24 15:42:21 [restartedMain] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-04-24 15:42:21 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-04-24 15:42:21 [restartedMain] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #12 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) Drop table student_books
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:962)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352)
	at az.devolopia.librarian_mubariz_bayramov.LibrarianMubarizBayramovApplication.main(LibrarianMubarizBayramovApplication.java:11)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #12 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) Drop table student_books
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:282)
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254)
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54)
	at org.springframework.boot.jdbc.init.DataSourceScriptDatabaseInitializer.runScripts(DataSourceScriptDatabaseInitializer.java:87)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.runScripts(AbstractScriptDatabaseInitializer.java:146)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyScripts(AbstractScriptDatabaseInitializer.java:108)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyDataScripts(AbstractScriptDatabaseInitializer.java:102)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.initializeDatabase(AbstractScriptDatabaseInitializer.java:77)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.afterPropertiesSet(AbstractScriptDatabaseInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784)
	... 21 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) [*]Drop table student_books"; SQL statement:
Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) Drop table student_books [42000-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.message.DbException.getSyntaxError(DbException.java:247)
	at org.h2.command.ParserBase.getSyntaxError(ParserBase.java:748)
	at org.h2.command.Parser.prepareCommand(Parser.java:486)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261)
	... 31 common frames omitted
2025-04-24 15:44:29 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2025-04-24 15:44:29 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - Starting LibrarianMubarizBayramovApplication using Java 21.0.5 with PID 116836 (C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes started by User in C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov)
2025-04-24 15:44:29 [restartedMain] DEBUG a.d.l.LibrarianMubarizBayramovApplication - Running with Spring Boot v3.3.1, Spring v6.1.10
2025-04-24 15:44:29 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - No active profile set, falling back to 1 default profile: "default"
2025-04-24 15:44:29 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-04-24 15:44:29 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-04-24 15:44:30 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-24 15:44:30 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 110 ms. Found 8 JPA repository interfaces.
2025-04-24 15:44:31 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8888 (http)
2025-04-24 15:44:31 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8888"]
2025-04-24 15:44:31 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-04-24 15:44:31 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-04-24 15:44:31 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-04-24 15:44:31 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1614 ms
2025-04-24 15:44:31 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-04-24 15:44:31 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:db user=ROOT
2025-04-24 15:44:31 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-04-24 15:44:31 [restartedMain] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:db'
2025-04-24 15:44:31 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-24 15:44:31 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.2.Final
2025-04-24 15:44:32 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-04-24 15:44:32 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-24 15:44:32 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-04-24 15:44:32 [restartedMain] DEBUG org.hibernate.SQL - create table authorities (id integer generated by default as identity, authority varchar(255), username varchar(255), primary key (id))
2025-04-24 15:44:32 [restartedMain] DEBUG org.hibernate.SQL - create table authority_list (id integer generated by default as identity, authority varchar(255), librarian integer, student integer, primary key (id))
2025-04-24 15:44:33 [restartedMain] DEBUG org.hibernate.SQL - create table books (id integer generated by default as identity, author varchar(255), category_id integer, color varchar(255), description varchar(255), librarian_code integer, name varchar(255), page_count integer, price numeric(38,2), publish_date date, quantity integer, weight float(53), primary key (id))
2025-04-24 15:44:33 [restartedMain] DEBUG org.hibernate.SQL - create table librarians (id integer generated by default as identity, birthday date, name varchar(255), phone varchar(255), surname varchar(255), primary key (id))
2025-04-24 15:44:33 [restartedMain] DEBUG org.hibernate.SQL - create table librarians_book_count (id integer not null, count integer, name varchar(255), primary key (id))
2025-04-24 15:44:33 [restartedMain] DEBUG org.hibernate.SQL - create table student_books (id integer generated by default as identity, book_id integer, due_date date, given_date date, librarian_id integer, student_id integer, primary key (id))
2025-04-24 15:44:33 [restartedMain] DEBUG org.hibernate.SQL - create table students (id integer generated by default as identity, age integer, email varchar(255), librarian_code integer, name varchar(255), surname varchar(255), primary key (id))
2025-04-24 15:44:33 [restartedMain] DEBUG org.hibernate.SQL - create table translates (id integer generated by default as identity, language varchar(255), translate varchar(255), word varchar(255), primary key (id))
2025-04-24 15:44:33 [restartedMain] DEBUG org.hibernate.SQL - create table users (username varchar(255) not null, enabled boolean, password varchar(255), user_id integer, user_type varchar(255), primary key (username))
2025-04-24 15:44:33 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-24 15:44:33 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-04-24 15:44:33 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-04-24 15:44:33 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-04-24 15:44:33 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-04-24 15:44:34 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #11 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: DROP VIEW IF EXISTS librarians_book_count
2025-04-24 15:44:34 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-04-24 15:44:34 [restartedMain] WARN  o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-224]
2025-04-24 15:44:34 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-04-24 15:44:34 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-04-24 15:44:34 [restartedMain] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-04-24 15:44:34 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-04-24 15:44:34 [restartedMain] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #11 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: DROP VIEW IF EXISTS librarians_book_count
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:962)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352)
	at az.devolopia.librarian_mubariz_bayramov.LibrarianMubarizBayramovApplication.main(LibrarianMubarizBayramovApplication.java:11)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #11 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: DROP VIEW IF EXISTS librarians_book_count
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:282)
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254)
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54)
	at org.springframework.boot.jdbc.init.DataSourceScriptDatabaseInitializer.runScripts(DataSourceScriptDatabaseInitializer.java:87)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.runScripts(AbstractScriptDatabaseInitializer.java:146)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyScripts(AbstractScriptDatabaseInitializer.java:108)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyDataScripts(AbstractScriptDatabaseInitializer.java:102)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.initializeDatabase(AbstractScriptDatabaseInitializer.java:77)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.afterPropertiesSet(AbstractScriptDatabaseInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784)
	... 21 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: View "LIBRARIANS_BOOK_COUNT" not found; SQL statement:
DROP VIEW IF EXISTS librarians_book_count [90037-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:644)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.ddl.DropView.update(DropView.java:59)
	at org.h2.command.CommandContainer.update(CommandContainer.java:169)
	at org.h2.command.Command.executeUpdate(Command.java:256)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:262)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261)
	... 31 common frames omitted
2025-04-24 15:46:38 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2025-04-24 15:46:38 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - Starting LibrarianMubarizBayramovApplication using Java 21.0.5 with PID 120852 (C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes started by User in C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov)
2025-04-24 15:46:38 [restartedMain] DEBUG a.d.l.LibrarianMubarizBayramovApplication - Running with Spring Boot v3.3.1, Spring v6.1.10
2025-04-24 15:46:38 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - No active profile set, falling back to 1 default profile: "default"
2025-04-24 15:46:38 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-04-24 15:46:38 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-04-24 15:46:39 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-24 15:46:39 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 116 ms. Found 8 JPA repository interfaces.
2025-04-24 15:46:40 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8888 (http)
2025-04-24 15:46:40 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8888"]
2025-04-24 15:46:40 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-04-24 15:46:40 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-04-24 15:46:40 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-04-24 15:46:40 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1808 ms
2025-04-24 15:46:40 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-04-24 15:46:40 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:db user=ROOT
2025-04-24 15:46:40 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-04-24 15:46:40 [restartedMain] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:db'
2025-04-24 15:46:40 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-24 15:46:40 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.2.Final
2025-04-24 15:46:41 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-04-24 15:46:41 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-24 15:46:42 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-04-24 15:46:42 [restartedMain] DEBUG org.hibernate.SQL - create table authorities (id integer generated by default as identity, authority varchar(255), username varchar(255), primary key (id))
2025-04-24 15:46:42 [restartedMain] DEBUG org.hibernate.SQL - create table authority_list (id integer generated by default as identity, authority varchar(255), librarian integer, student integer, primary key (id))
2025-04-24 15:46:42 [restartedMain] DEBUG org.hibernate.SQL - create table books (id integer generated by default as identity, author varchar(255), category_id integer, color varchar(255), description varchar(255), librarian_code integer, name varchar(255), page_count integer, price numeric(38,2), publish_date date, quantity integer, weight float(53), primary key (id))
2025-04-24 15:46:42 [restartedMain] DEBUG org.hibernate.SQL - create table librarians (id integer generated by default as identity, birthday date, name varchar(255), phone varchar(255), surname varchar(255), primary key (id))
2025-04-24 15:46:42 [restartedMain] DEBUG org.hibernate.SQL - create table librarians_book_count (id integer not null, count integer, name varchar(255), primary key (id))
2025-04-24 15:46:42 [restartedMain] DEBUG org.hibernate.SQL - create table student_books (id integer generated by default as identity, book_id integer, due_date date, given_date date, librarian_id integer, student_id integer, primary key (id))
2025-04-24 15:46:42 [restartedMain] DEBUG org.hibernate.SQL - create table students (id integer generated by default as identity, age integer, email varchar(255), librarian_code integer, name varchar(255), surname varchar(255), primary key (id))
2025-04-24 15:46:42 [restartedMain] DEBUG org.hibernate.SQL - create table translates (id integer generated by default as identity, language varchar(255), translate varchar(255), word varchar(255), primary key (id))
2025-04-24 15:46:42 [restartedMain] DEBUG org.hibernate.SQL - create table users (username varchar(255) not null, enabled boolean, password varchar(255), user_id integer, user_type varchar(255), primary key (username))
2025-04-24 15:46:42 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-24 15:46:42 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-04-24 15:46:42 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-04-24 15:46:42 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-04-24 15:46:42 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-04-24 15:46:43 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #11 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: DROP VIEW IF EXISTS librarians_book_count
2025-04-24 15:46:43 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-04-24 15:46:43 [restartedMain] WARN  o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-224]
2025-04-24 15:46:43 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-04-24 15:46:43 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-04-24 15:46:43 [restartedMain] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-04-24 15:46:43 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-04-24 15:46:43 [restartedMain] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #11 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: DROP VIEW IF EXISTS librarians_book_count
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:962)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352)
	at az.devolopia.librarian_mubariz_bayramov.LibrarianMubarizBayramovApplication.main(LibrarianMubarizBayramovApplication.java:11)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #11 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: DROP VIEW IF EXISTS librarians_book_count
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:282)
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254)
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54)
	at org.springframework.boot.jdbc.init.DataSourceScriptDatabaseInitializer.runScripts(DataSourceScriptDatabaseInitializer.java:87)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.runScripts(AbstractScriptDatabaseInitializer.java:146)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyScripts(AbstractScriptDatabaseInitializer.java:108)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyDataScripts(AbstractScriptDatabaseInitializer.java:102)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.initializeDatabase(AbstractScriptDatabaseInitializer.java:77)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.afterPropertiesSet(AbstractScriptDatabaseInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784)
	... 21 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: View "LIBRARIANS_BOOK_COUNT" not found; SQL statement:
DROP VIEW IF EXISTS librarians_book_count [90037-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:644)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.ddl.DropView.update(DropView.java:59)
	at org.h2.command.CommandContainer.update(CommandContainer.java:169)
	at org.h2.command.Command.executeUpdate(Command.java:256)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:262)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261)
	... 31 common frames omitted
2025-04-24 15:47:17 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2025-04-24 15:47:17 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - Starting LibrarianMubarizBayramovApplication using Java 21.0.5 with PID 112964 (C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes started by User in C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov)
2025-04-24 15:47:17 [restartedMain] DEBUG a.d.l.LibrarianMubarizBayramovApplication - Running with Spring Boot v3.3.1, Spring v6.1.10
2025-04-24 15:47:17 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - No active profile set, falling back to 1 default profile: "default"
2025-04-24 15:47:17 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-04-24 15:47:17 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-04-24 15:47:18 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-24 15:47:18 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 115 ms. Found 8 JPA repository interfaces.
2025-04-24 15:47:19 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8888 (http)
2025-04-24 15:47:19 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8888"]
2025-04-24 15:47:19 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-04-24 15:47:19 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-04-24 15:47:19 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-04-24 15:47:19 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1632 ms
2025-04-24 15:47:19 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-04-24 15:47:19 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:db user=ROOT
2025-04-24 15:47:19 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-04-24 15:47:19 [restartedMain] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:db'
2025-04-24 15:47:19 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-24 15:47:19 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.2.Final
2025-04-24 15:47:19 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-04-24 15:47:20 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-24 15:47:20 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-04-24 15:47:20 [restartedMain] DEBUG org.hibernate.SQL - create table authorities (id integer generated by default as identity, authority varchar(255), username varchar(255), primary key (id))
2025-04-24 15:47:20 [restartedMain] DEBUG org.hibernate.SQL - create table authority_list (id integer generated by default as identity, authority varchar(255), librarian integer, student integer, primary key (id))
2025-04-24 15:47:20 [restartedMain] DEBUG org.hibernate.SQL - create table books (id integer generated by default as identity, author varchar(255), category_id integer, color varchar(255), description varchar(255), librarian_code integer, name varchar(255), page_count integer, price numeric(38,2), publish_date date, quantity integer, weight float(53), primary key (id))
2025-04-24 15:47:20 [restartedMain] DEBUG org.hibernate.SQL - create table librarians (id integer generated by default as identity, birthday date, name varchar(255), phone varchar(255), surname varchar(255), primary key (id))
2025-04-24 15:47:20 [restartedMain] DEBUG org.hibernate.SQL - create table librarians_book_count (id integer not null, count integer, name varchar(255), primary key (id))
2025-04-24 15:47:20 [restartedMain] DEBUG org.hibernate.SQL - create table student_books (id integer generated by default as identity, book_id integer, due_date date, given_date date, librarian_id integer, student_id integer, primary key (id))
2025-04-24 15:47:20 [restartedMain] DEBUG org.hibernate.SQL - create table students (id integer generated by default as identity, age integer, email varchar(255), librarian_code integer, name varchar(255), surname varchar(255), primary key (id))
2025-04-24 15:47:20 [restartedMain] DEBUG org.hibernate.SQL - create table translates (id integer generated by default as identity, language varchar(255), translate varchar(255), word varchar(255), primary key (id))
2025-04-24 15:47:20 [restartedMain] DEBUG org.hibernate.SQL - create table users (username varchar(255) not null, enabled boolean, password varchar(255), user_id integer, user_type varchar(255), primary key (username))
2025-04-24 15:47:20 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-24 15:47:21 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-04-24 15:47:21 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-04-24 15:47:21 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-04-24 15:47:21 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-04-24 15:47:22 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-04-24 15:47:22 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8888"]
2025-04-24 15:47:22 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8888 (http) with context path '/'
2025-04-24 15:47:22 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - Started LibrarianMubarizBayramovApplication in 4.742 seconds (process running for 5.105)
2025-04-24 15:48:19 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2025-04-24 15:48:19 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - Starting LibrarianMubarizBayramovApplication using Java 21.0.5 with PID 122524 (C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes started by User in C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov)
2025-04-24 15:48:19 [restartedMain] DEBUG a.d.l.LibrarianMubarizBayramovApplication - Running with Spring Boot v3.3.1, Spring v6.1.10
2025-04-24 15:48:19 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - No active profile set, falling back to 1 default profile: "default"
2025-04-24 15:48:19 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-04-24 15:48:19 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-04-24 15:48:20 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-24 15:48:20 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 104 ms. Found 8 JPA repository interfaces.
2025-04-24 15:48:21 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8888 (http)
2025-04-24 15:48:21 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8888"]
2025-04-24 15:48:21 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-04-24 15:48:21 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-04-24 15:48:21 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-04-24 15:48:21 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1630 ms
2025-04-24 15:48:21 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-04-24 15:48:21 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:db user=ROOT
2025-04-24 15:48:21 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-04-24 15:48:21 [restartedMain] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:db'
2025-04-24 15:48:21 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-24 15:48:21 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.2.Final
2025-04-24 15:48:21 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-04-24 15:48:21 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-24 15:48:22 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-04-24 15:48:22 [restartedMain] DEBUG org.hibernate.SQL - create table authorities (id integer generated by default as identity, authority varchar(255), username varchar(255), primary key (id))
2025-04-24 15:48:22 [restartedMain] DEBUG org.hibernate.SQL - create table authority_list (id integer generated by default as identity, authority varchar(255), librarian integer, student integer, primary key (id))
2025-04-24 15:48:22 [restartedMain] DEBUG org.hibernate.SQL - create table books (id integer generated by default as identity, author varchar(255), category_id integer, color varchar(255), description varchar(255), librarian_code integer, name varchar(255), page_count integer, price numeric(38,2), publish_date date, quantity integer, weight float(53), primary key (id))
2025-04-24 15:48:22 [restartedMain] DEBUG org.hibernate.SQL - create table librarians (id integer generated by default as identity, birthday date, name varchar(255), phone varchar(255), surname varchar(255), primary key (id))
2025-04-24 15:48:22 [restartedMain] DEBUG org.hibernate.SQL - create table librarians_book_count (id integer not null, count integer, name varchar(255), primary key (id))
2025-04-24 15:48:22 [restartedMain] DEBUG org.hibernate.SQL - create table student_books (id integer generated by default as identity, book_id integer, due_date date, given_date date, librarian_id integer, student_id integer, primary key (id))
2025-04-24 15:48:22 [restartedMain] DEBUG org.hibernate.SQL - create table students (id integer generated by default as identity, age integer, email varchar(255), librarian_code integer, name varchar(255), surname varchar(255), primary key (id))
2025-04-24 15:48:22 [restartedMain] DEBUG org.hibernate.SQL - create table translates (id integer generated by default as identity, language varchar(255), translate varchar(255), word varchar(255), primary key (id))
2025-04-24 15:48:22 [restartedMain] DEBUG org.hibernate.SQL - create table users (username varchar(255) not null, enabled boolean, password varchar(255), user_id integer, user_type varchar(255), primary key (username))
2025-04-24 15:48:22 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-24 15:48:22 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-04-24 15:48:23 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-04-24 15:48:23 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-04-24 15:48:23 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-04-24 15:48:23 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #11 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: DROP VIEW IF EXISTS librarians_book_count
2025-04-24 15:48:23 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-04-24 15:48:23 [restartedMain] WARN  o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-224]
2025-04-24 15:48:23 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-04-24 15:48:23 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-04-24 15:48:23 [restartedMain] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-04-24 15:48:23 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-04-24 15:48:23 [restartedMain] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #11 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: DROP VIEW IF EXISTS librarians_book_count
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:962)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352)
	at az.devolopia.librarian_mubariz_bayramov.LibrarianMubarizBayramovApplication.main(LibrarianMubarizBayramovApplication.java:11)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #11 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: DROP VIEW IF EXISTS librarians_book_count
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:282)
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254)
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54)
	at org.springframework.boot.jdbc.init.DataSourceScriptDatabaseInitializer.runScripts(DataSourceScriptDatabaseInitializer.java:87)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.runScripts(AbstractScriptDatabaseInitializer.java:146)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyScripts(AbstractScriptDatabaseInitializer.java:108)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyDataScripts(AbstractScriptDatabaseInitializer.java:102)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.initializeDatabase(AbstractScriptDatabaseInitializer.java:77)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.afterPropertiesSet(AbstractScriptDatabaseInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784)
	... 21 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: View "LIBRARIANS_BOOK_COUNT" not found; SQL statement:
DROP VIEW IF EXISTS librarians_book_count [90037-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:644)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.ddl.DropView.update(DropView.java:59)
	at org.h2.command.CommandContainer.update(CommandContainer.java:169)
	at org.h2.command.Command.executeUpdate(Command.java:256)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:262)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261)
	... 31 common frames omitted
2025-04-24 15:50:01 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2025-04-24 15:50:01 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - Starting LibrarianMubarizBayramovApplication using Java 21.0.5 with PID 123724 (C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes started by User in C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov)
2025-04-24 15:50:01 [restartedMain] DEBUG a.d.l.LibrarianMubarizBayramovApplication - Running with Spring Boot v3.3.1, Spring v6.1.10
2025-04-24 15:50:01 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - No active profile set, falling back to 1 default profile: "default"
2025-04-24 15:50:01 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-04-24 15:50:01 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-04-24 15:50:02 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-24 15:50:02 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 112 ms. Found 8 JPA repository interfaces.
2025-04-24 15:50:03 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8888 (http)
2025-04-24 15:50:03 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8888"]
2025-04-24 15:50:03 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-04-24 15:50:03 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-04-24 15:50:03 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-04-24 15:50:03 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1692 ms
2025-04-24 15:50:03 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-04-24 15:50:03 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:db user=ROOT
2025-04-24 15:50:03 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-04-24 15:50:03 [restartedMain] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:db'
2025-04-24 15:50:03 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-24 15:50:03 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.2.Final
2025-04-24 15:50:03 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-04-24 15:50:03 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-24 15:50:04 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-04-24 15:50:04 [restartedMain] DEBUG org.hibernate.SQL - create table authorities (id integer generated by default as identity, authority varchar(255), username varchar(255), primary key (id))
2025-04-24 15:50:04 [restartedMain] DEBUG org.hibernate.SQL - create table authority_list (id integer generated by default as identity, authority varchar(255), librarian integer, student integer, primary key (id))
2025-04-24 15:50:04 [restartedMain] DEBUG org.hibernate.SQL - create table books (id integer generated by default as identity, author varchar(255), category_id integer, color varchar(255), description varchar(255), librarian_code integer, name varchar(255), page_count integer, price numeric(38,2), publish_date date, quantity integer, weight float(53), primary key (id))
2025-04-24 15:50:04 [restartedMain] DEBUG org.hibernate.SQL - create table librarians (id integer generated by default as identity, birthday date, name varchar(255), phone varchar(255), surname varchar(255), primary key (id))
2025-04-24 15:50:04 [restartedMain] DEBUG org.hibernate.SQL - create table librarians_book_count (id integer not null, count integer, name varchar(255), primary key (id))
2025-04-24 15:50:04 [restartedMain] DEBUG org.hibernate.SQL - create table student_books (id integer generated by default as identity, book_id integer, due_date date, given_date date, librarian_id integer, student_id integer, primary key (id))
2025-04-24 15:50:04 [restartedMain] DEBUG org.hibernate.SQL - create table students (id integer generated by default as identity, age integer, email varchar(255), librarian_code integer, name varchar(255), surname varchar(255), primary key (id))
2025-04-24 15:50:04 [restartedMain] DEBUG org.hibernate.SQL - create table translates (id integer generated by default as identity, language varchar(255), translate varchar(255), word varchar(255), primary key (id))
2025-04-24 15:50:04 [restartedMain] DEBUG org.hibernate.SQL - create table users (username varchar(255) not null, enabled boolean, password varchar(255), user_id integer, user_type varchar(255), primary key (username))
2025-04-24 15:50:04 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-24 15:50:04 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-04-24 15:50:05 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-04-24 15:50:05 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-04-24 15:50:05 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-04-24 15:50:05 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #12 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) DROP table student_books
2025-04-24 15:50:05 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-04-24 15:50:05 [restartedMain] WARN  o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-224]
2025-04-24 15:50:05 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-04-24 15:50:05 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-04-24 15:50:05 [restartedMain] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-04-24 15:50:05 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-04-24 15:50:05 [restartedMain] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #12 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) DROP table student_books
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:962)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352)
	at az.devolopia.librarian_mubariz_bayramov.LibrarianMubarizBayramovApplication.main(LibrarianMubarizBayramovApplication.java:11)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #12 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) DROP table student_books
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:282)
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254)
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54)
	at org.springframework.boot.jdbc.init.DataSourceScriptDatabaseInitializer.runScripts(DataSourceScriptDatabaseInitializer.java:87)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.runScripts(AbstractScriptDatabaseInitializer.java:146)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyScripts(AbstractScriptDatabaseInitializer.java:108)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyDataScripts(AbstractScriptDatabaseInitializer.java:102)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.initializeDatabase(AbstractScriptDatabaseInitializer.java:77)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.afterPropertiesSet(AbstractScriptDatabaseInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784)
	... 21 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) [*]DROP table student_books"; SQL statement:
Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) DROP table student_books [42000-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.message.DbException.getSyntaxError(DbException.java:247)
	at org.h2.command.ParserBase.getSyntaxError(ParserBase.java:748)
	at org.h2.command.Parser.prepareCommand(Parser.java:486)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261)
	... 31 common frames omitted
2025-04-24 15:50:58 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2025-04-24 15:50:58 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - Starting LibrarianMubarizBayramovApplication using Java 21.0.5 with PID 119892 (C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes started by User in C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov)
2025-04-24 15:50:58 [restartedMain] DEBUG a.d.l.LibrarianMubarizBayramovApplication - Running with Spring Boot v3.3.1, Spring v6.1.10
2025-04-24 15:50:58 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - No active profile set, falling back to 1 default profile: "default"
2025-04-24 15:50:58 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-04-24 15:50:58 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-04-24 15:50:59 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-24 15:50:59 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 103 ms. Found 8 JPA repository interfaces.
2025-04-24 15:51:00 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8888 (http)
2025-04-24 15:51:00 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8888"]
2025-04-24 15:51:00 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-04-24 15:51:00 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-04-24 15:51:00 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-04-24 15:51:00 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1594 ms
2025-04-24 15:51:00 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-04-24 15:51:00 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:db user=ROOT
2025-04-24 15:51:00 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-04-24 15:51:00 [restartedMain] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:db'
2025-04-24 15:51:00 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-24 15:51:00 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.2.Final
2025-04-24 15:51:00 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-04-24 15:51:00 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-24 15:51:01 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-04-24 15:51:01 [restartedMain] DEBUG org.hibernate.SQL - create table authorities (id integer generated by default as identity, authority varchar(255), username varchar(255), primary key (id))
2025-04-24 15:51:01 [restartedMain] DEBUG org.hibernate.SQL - create table authority_list (id integer generated by default as identity, authority varchar(255), librarian integer, student integer, primary key (id))
2025-04-24 15:51:01 [restartedMain] DEBUG org.hibernate.SQL - create table books (id integer generated by default as identity, author varchar(255), category_id integer, color varchar(255), description varchar(255), librarian_code integer, name varchar(255), page_count integer, price numeric(38,2), publish_date date, quantity integer, weight float(53), primary key (id))
2025-04-24 15:51:01 [restartedMain] DEBUG org.hibernate.SQL - create table librarians (id integer generated by default as identity, birthday date, name varchar(255), phone varchar(255), surname varchar(255), primary key (id))
2025-04-24 15:51:01 [restartedMain] DEBUG org.hibernate.SQL - create table librarians_book_count (id integer not null, count integer, name varchar(255), primary key (id))
2025-04-24 15:51:01 [restartedMain] DEBUG org.hibernate.SQL - create table student_books (id integer generated by default as identity, book_id integer, due_date date, given_date date, librarian_id integer, student_id integer, primary key (id))
2025-04-24 15:51:01 [restartedMain] DEBUG org.hibernate.SQL - create table students (id integer generated by default as identity, age integer, email varchar(255), librarian_code integer, name varchar(255), surname varchar(255), primary key (id))
2025-04-24 15:51:01 [restartedMain] DEBUG org.hibernate.SQL - create table translates (id integer generated by default as identity, language varchar(255), translate varchar(255), word varchar(255), primary key (id))
2025-04-24 15:51:01 [restartedMain] DEBUG org.hibernate.SQL - create table users (username varchar(255) not null, enabled boolean, password varchar(255), user_id integer, user_type varchar(255), primary key (username))
2025-04-24 15:51:01 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-24 15:51:01 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-04-24 15:51:02 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-04-24 15:51:02 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-04-24 15:51:02 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-04-24 15:51:02 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #12 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) DROP table student_books
2025-04-24 15:51:02 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-04-24 15:51:02 [restartedMain] WARN  o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-224]
2025-04-24 15:51:02 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-04-24 15:51:02 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-04-24 15:51:02 [restartedMain] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-04-24 15:51:02 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-04-24 15:51:02 [restartedMain] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #12 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) DROP table student_books
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:962)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352)
	at az.devolopia.librarian_mubariz_bayramov.LibrarianMubarizBayramovApplication.main(LibrarianMubarizBayramovApplication.java:11)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #12 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) DROP table student_books
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:282)
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254)
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54)
	at org.springframework.boot.jdbc.init.DataSourceScriptDatabaseInitializer.runScripts(DataSourceScriptDatabaseInitializer.java:87)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.runScripts(AbstractScriptDatabaseInitializer.java:146)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyScripts(AbstractScriptDatabaseInitializer.java:108)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyDataScripts(AbstractScriptDatabaseInitializer.java:102)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.initializeDatabase(AbstractScriptDatabaseInitializer.java:77)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.afterPropertiesSet(AbstractScriptDatabaseInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784)
	... 21 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) [*]DROP table student_books"; SQL statement:
Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) DROP table student_books [42000-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.message.DbException.getSyntaxError(DbException.java:247)
	at org.h2.command.ParserBase.getSyntaxError(ParserBase.java:748)
	at org.h2.command.Parser.prepareCommand(Parser.java:486)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261)
	... 31 common frames omitted
2025-04-24 15:54:36 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2025-04-24 15:54:36 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - Starting LibrarianMubarizBayramovApplication using Java 21.0.5 with PID 125496 (C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes started by User in C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov)
2025-04-24 15:54:36 [restartedMain] DEBUG a.d.l.LibrarianMubarizBayramovApplication - Running with Spring Boot v3.3.1, Spring v6.1.10
2025-04-24 15:54:36 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - No active profile set, falling back to 1 default profile: "default"
2025-04-24 15:54:36 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-04-24 15:54:36 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-04-24 15:54:37 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-24 15:54:37 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 111 ms. Found 8 JPA repository interfaces.
2025-04-24 15:54:38 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8888 (http)
2025-04-24 15:54:38 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8888"]
2025-04-24 15:54:38 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-04-24 15:54:38 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-04-24 15:54:38 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-04-24 15:54:38 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1613 ms
2025-04-24 15:54:38 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-04-24 15:54:38 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:db user=ROOT
2025-04-24 15:54:38 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-04-24 15:54:38 [restartedMain] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:db'
2025-04-24 15:54:38 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-24 15:54:38 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.2.Final
2025-04-24 15:54:38 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-04-24 15:54:39 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-24 15:54:39 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-04-24 15:54:39 [restartedMain] DEBUG org.hibernate.SQL - create table authorities (id integer generated by default as identity, authority varchar(255), username varchar(255), primary key (id))
2025-04-24 15:54:39 [restartedMain] DEBUG org.hibernate.SQL - create table authority_list (id integer generated by default as identity, authority varchar(255), librarian integer, student integer, primary key (id))
2025-04-24 15:54:39 [restartedMain] DEBUG org.hibernate.SQL - create table books (id integer generated by default as identity, author varchar(255), category_id integer, color varchar(255), description varchar(255), librarian_code integer, name varchar(255), page_count integer, price numeric(38,2), publish_date date, quantity integer, weight float(53), primary key (id))
2025-04-24 15:54:39 [restartedMain] DEBUG org.hibernate.SQL - create table librarians (id integer generated by default as identity, birthday date, name varchar(255), phone varchar(255), surname varchar(255), primary key (id))
2025-04-24 15:54:39 [restartedMain] DEBUG org.hibernate.SQL - create table librarians_book_count (id integer not null, count integer, name varchar(255), primary key (id))
2025-04-24 15:54:39 [restartedMain] DEBUG org.hibernate.SQL - create table student_books (id integer generated by default as identity, book_id integer, due_date date, given_date date, librarian_id integer, student_id integer, primary key (id))
2025-04-24 15:54:39 [restartedMain] DEBUG org.hibernate.SQL - create table students (id integer generated by default as identity, age integer, email varchar(255), librarian_code integer, name varchar(255), surname varchar(255), primary key (id))
2025-04-24 15:54:39 [restartedMain] DEBUG org.hibernate.SQL - create table translates (id integer generated by default as identity, language varchar(255), translate varchar(255), word varchar(255), primary key (id))
2025-04-24 15:54:39 [restartedMain] DEBUG org.hibernate.SQL - create table users (username varchar(255) not null, enabled boolean, password varchar(255), user_id integer, user_type varchar(255), primary key (username))
2025-04-24 15:54:39 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-24 15:54:40 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-04-24 15:54:40 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-04-24 15:54:40 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-04-24 15:54:40 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-04-24 15:54:41 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #12 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) CREATE VIEW student_books AS( SELECT s.name AS student_name, s.surname AS student_surname, COUNT(sb.book_id) AS book_count FROM students s LEFT JOIN student_books sb ON s.id = sb.student_id GROUP BY s.id, s.name, s.surname) 
2025-04-24 15:54:41 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-04-24 15:54:41 [restartedMain] WARN  o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-224]
2025-04-24 15:54:41 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-04-24 15:54:41 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-04-24 15:54:41 [restartedMain] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-04-24 15:54:41 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-04-24 15:54:41 [restartedMain] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #12 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) CREATE VIEW student_books AS( SELECT s.name AS student_name, s.surname AS student_surname, COUNT(sb.book_id) AS book_count FROM students s LEFT JOIN student_books sb ON s.id = sb.student_id GROUP BY s.id, s.name, s.surname) 
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:962)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352)
	at az.devolopia.librarian_mubariz_bayramov.LibrarianMubarizBayramovApplication.main(LibrarianMubarizBayramovApplication.java:11)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #12 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) CREATE VIEW student_books AS( SELECT s.name AS student_name, s.surname AS student_surname, COUNT(sb.book_id) AS book_count FROM students s LEFT JOIN student_books sb ON s.id = sb.student_id GROUP BY s.id, s.name, s.surname) 
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:282)
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254)
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54)
	at org.springframework.boot.jdbc.init.DataSourceScriptDatabaseInitializer.runScripts(DataSourceScriptDatabaseInitializer.java:87)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.runScripts(AbstractScriptDatabaseInitializer.java:146)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyScripts(AbstractScriptDatabaseInitializer.java:108)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyDataScripts(AbstractScriptDatabaseInitializer.java:102)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.initializeDatabase(AbstractScriptDatabaseInitializer.java:77)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.afterPropertiesSet(AbstractScriptDatabaseInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784)
	... 21 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) [*]CREATE VIEW student_books AS( SELECT s.name AS student_name, s.surname AS student_surname, COUNT(sb.book_id) AS book_count FROM students s LEFT JOIN student_books sb ON s.id = sb.student_id GROUP BY s.id, s.name, s.surname) "; SQL statement:
Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) CREATE VIEW student_books AS( SELECT s.name AS student_name, s.surname AS student_surname, COUNT(sb.book_id) AS book_count FROM students s LEFT JOIN student_books sb ON s.id = sb.student_id GROUP BY s.id, s.name, s.surname)  [42000-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.message.DbException.getSyntaxError(DbException.java:247)
	at org.h2.command.ParserBase.getSyntaxError(ParserBase.java:748)
	at org.h2.command.Parser.prepareCommand(Parser.java:486)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261)
	... 31 common frames omitted
2025-04-24 15:55:38 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2025-04-24 15:55:38 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - Starting LibrarianMubarizBayramovApplication using Java 21.0.5 with PID 117000 (C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes started by User in C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov)
2025-04-24 15:55:38 [restartedMain] DEBUG a.d.l.LibrarianMubarizBayramovApplication - Running with Spring Boot v3.3.1, Spring v6.1.10
2025-04-24 15:55:38 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - No active profile set, falling back to 1 default profile: "default"
2025-04-24 15:55:38 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-04-24 15:55:38 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-04-24 15:55:38 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-24 15:55:39 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 105 ms. Found 8 JPA repository interfaces.
2025-04-24 15:55:39 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8888 (http)
2025-04-24 15:55:39 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8888"]
2025-04-24 15:55:39 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-04-24 15:55:39 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-04-24 15:55:39 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-04-24 15:55:39 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1589 ms
2025-04-24 15:55:39 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-04-24 15:55:39 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:db user=ROOT
2025-04-24 15:55:39 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-04-24 15:55:39 [restartedMain] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:db'
2025-04-24 15:55:39 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-24 15:55:40 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.2.Final
2025-04-24 15:55:40 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-04-24 15:55:40 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-24 15:55:41 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-04-24 15:55:41 [restartedMain] DEBUG org.hibernate.SQL - create table authorities (id integer generated by default as identity, authority varchar(255), username varchar(255), primary key (id))
2025-04-24 15:55:41 [restartedMain] DEBUG org.hibernate.SQL - create table authority_list (id integer generated by default as identity, authority varchar(255), librarian integer, student integer, primary key (id))
2025-04-24 15:55:41 [restartedMain] DEBUG org.hibernate.SQL - create table books (id integer generated by default as identity, author varchar(255), category_id integer, color varchar(255), description varchar(255), librarian_code integer, name varchar(255), page_count integer, price numeric(38,2), publish_date date, quantity integer, weight float(53), primary key (id))
2025-04-24 15:55:41 [restartedMain] DEBUG org.hibernate.SQL - create table librarians (id integer generated by default as identity, birthday date, name varchar(255), phone varchar(255), surname varchar(255), primary key (id))
2025-04-24 15:55:41 [restartedMain] DEBUG org.hibernate.SQL - create table librarians_book_count (id integer not null, count integer, name varchar(255), primary key (id))
2025-04-24 15:55:41 [restartedMain] DEBUG org.hibernate.SQL - create table student_books (id integer generated by default as identity, book_id integer, due_date date, given_date date, librarian_id integer, student_id integer, primary key (id))
2025-04-24 15:55:41 [restartedMain] DEBUG org.hibernate.SQL - create table students (id integer generated by default as identity, age integer, email varchar(255), librarian_code integer, name varchar(255), surname varchar(255), primary key (id))
2025-04-24 15:55:41 [restartedMain] DEBUG org.hibernate.SQL - create table translates (id integer generated by default as identity, language varchar(255), translate varchar(255), word varchar(255), primary key (id))
2025-04-24 15:55:41 [restartedMain] DEBUG org.hibernate.SQL - create table users (username varchar(255) not null, enabled boolean, password varchar(255), user_id integer, user_type varchar(255), primary key (username))
2025-04-24 15:55:41 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-24 15:55:41 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-04-24 15:55:41 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-04-24 15:55:41 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-04-24 15:55:41 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-04-24 15:55:42 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-04-24 15:55:42 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8888"]
2025-04-24 15:55:42 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8888 (http) with context path '/'
2025-04-24 15:55:42 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - Started LibrarianMubarizBayramovApplication in 4.743 seconds (process running for 5.097)
2025-04-24 15:56:34 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2025-04-24 15:56:34 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - Starting LibrarianMubarizBayramovApplication using Java 21.0.5 with PID 117992 (C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes started by User in C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov)
2025-04-24 15:56:34 [restartedMain] DEBUG a.d.l.LibrarianMubarizBayramovApplication - Running with Spring Boot v3.3.1, Spring v6.1.10
2025-04-24 15:56:34 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - No active profile set, falling back to 1 default profile: "default"
2025-04-24 15:56:34 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-04-24 15:56:34 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-04-24 15:56:35 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-24 15:56:35 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 113 ms. Found 8 JPA repository interfaces.
2025-04-24 15:56:35 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8888 (http)
2025-04-24 15:56:35 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8888"]
2025-04-24 15:56:35 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-04-24 15:56:35 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-04-24 15:56:35 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-04-24 15:56:35 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1663 ms
2025-04-24 15:56:35 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-04-24 15:56:36 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:db user=ROOT
2025-04-24 15:56:36 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-04-24 15:56:36 [restartedMain] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:db'
2025-04-24 15:56:36 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-24 15:56:36 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.2.Final
2025-04-24 15:56:36 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-04-24 15:56:36 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-24 15:56:37 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-04-24 15:56:37 [restartedMain] DEBUG org.hibernate.SQL - create table authorities (id integer generated by default as identity, authority varchar(255), username varchar(255), primary key (id))
2025-04-24 15:56:37 [restartedMain] DEBUG org.hibernate.SQL - create table authority_list (id integer generated by default as identity, authority varchar(255), librarian integer, student integer, primary key (id))
2025-04-24 15:56:37 [restartedMain] DEBUG org.hibernate.SQL - create table books (id integer generated by default as identity, author varchar(255), category_id integer, color varchar(255), description varchar(255), librarian_code integer, name varchar(255), page_count integer, price numeric(38,2), publish_date date, quantity integer, weight float(53), primary key (id))
2025-04-24 15:56:37 [restartedMain] DEBUG org.hibernate.SQL - create table librarians (id integer generated by default as identity, birthday date, name varchar(255), phone varchar(255), surname varchar(255), primary key (id))
2025-04-24 15:56:37 [restartedMain] DEBUG org.hibernate.SQL - create table librarians_book_count (id integer not null, count integer, name varchar(255), primary key (id))
2025-04-24 15:56:37 [restartedMain] DEBUG org.hibernate.SQL - create table student_books (id integer generated by default as identity, book_id integer, due_date date, given_date date, librarian_id integer, student_id integer, primary key (id))
2025-04-24 15:56:37 [restartedMain] DEBUG org.hibernate.SQL - create table students (id integer generated by default as identity, age integer, email varchar(255), librarian_code integer, name varchar(255), surname varchar(255), primary key (id))
2025-04-24 15:56:37 [restartedMain] DEBUG org.hibernate.SQL - create table translates (id integer generated by default as identity, language varchar(255), translate varchar(255), word varchar(255), primary key (id))
2025-04-24 15:56:37 [restartedMain] DEBUG org.hibernate.SQL - create table users (username varchar(255) not null, enabled boolean, password varchar(255), user_id integer, user_type varchar(255), primary key (username))
2025-04-24 15:56:37 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-24 15:56:37 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-04-24 15:56:37 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-04-24 15:56:37 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-04-24 15:56:37 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-04-24 15:56:38 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #12 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) Drop table student_books
2025-04-24 15:56:38 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-04-24 15:56:38 [restartedMain] WARN  o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-224]
2025-04-24 15:56:38 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-04-24 15:56:38 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-04-24 15:56:38 [restartedMain] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-04-24 15:56:38 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-04-24 15:56:38 [restartedMain] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #12 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) Drop table student_books
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:962)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352)
	at az.devolopia.librarian_mubariz_bayramov.LibrarianMubarizBayramovApplication.main(LibrarianMubarizBayramovApplication.java:11)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #12 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) Drop table student_books
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:282)
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254)
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54)
	at org.springframework.boot.jdbc.init.DataSourceScriptDatabaseInitializer.runScripts(DataSourceScriptDatabaseInitializer.java:87)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.runScripts(AbstractScriptDatabaseInitializer.java:146)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyScripts(AbstractScriptDatabaseInitializer.java:108)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyDataScripts(AbstractScriptDatabaseInitializer.java:102)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.initializeDatabase(AbstractScriptDatabaseInitializer.java:77)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.afterPropertiesSet(AbstractScriptDatabaseInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784)
	... 21 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) [*]Drop table student_books"; SQL statement:
Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) Drop table student_books [42000-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.message.DbException.getSyntaxError(DbException.java:247)
	at org.h2.command.ParserBase.getSyntaxError(ParserBase.java:748)
	at org.h2.command.Parser.prepareCommand(Parser.java:486)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261)
	... 31 common frames omitted
2025-04-24 15:57:37 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2025-04-24 15:57:37 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - Starting LibrarianMubarizBayramovApplication using Java 21.0.5 with PID 124528 (C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes started by User in C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov)
2025-04-24 15:57:37 [restartedMain] DEBUG a.d.l.LibrarianMubarizBayramovApplication - Running with Spring Boot v3.3.1, Spring v6.1.10
2025-04-24 15:57:37 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - No active profile set, falling back to 1 default profile: "default"
2025-04-24 15:57:37 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-04-24 15:57:37 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-04-24 15:57:38 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-24 15:57:38 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 110 ms. Found 8 JPA repository interfaces.
2025-04-24 15:57:39 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8888 (http)
2025-04-24 15:57:39 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8888"]
2025-04-24 15:57:39 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-04-24 15:57:39 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-04-24 15:57:39 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-04-24 15:57:39 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1662 ms
2025-04-24 15:57:39 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-04-24 15:57:39 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:db user=ROOT
2025-04-24 15:57:39 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-04-24 15:57:39 [restartedMain] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:db'
2025-04-24 15:57:39 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-24 15:57:39 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.2.Final
2025-04-24 15:57:39 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-04-24 15:57:39 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-24 15:57:40 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-04-24 15:57:40 [restartedMain] DEBUG org.hibernate.SQL - create table authorities (id integer generated by default as identity, authority varchar(255), username varchar(255), primary key (id))
2025-04-24 15:57:40 [restartedMain] DEBUG org.hibernate.SQL - create table authority_list (id integer generated by default as identity, authority varchar(255), librarian integer, student integer, primary key (id))
2025-04-24 15:57:40 [restartedMain] DEBUG org.hibernate.SQL - create table books (id integer generated by default as identity, author varchar(255), category_id integer, color varchar(255), description varchar(255), librarian_code integer, name varchar(255), page_count integer, price numeric(38,2), publish_date date, quantity integer, weight float(53), primary key (id))
2025-04-24 15:57:40 [restartedMain] DEBUG org.hibernate.SQL - create table librarians (id integer generated by default as identity, birthday date, name varchar(255), phone varchar(255), surname varchar(255), primary key (id))
2025-04-24 15:57:40 [restartedMain] DEBUG org.hibernate.SQL - create table librarians_book_count (id integer not null, count integer, name varchar(255), primary key (id))
2025-04-24 15:57:40 [restartedMain] DEBUG org.hibernate.SQL - create table student_books (id integer generated by default as identity, book_id integer, due_date date, given_date date, librarian_id integer, student_id integer, primary key (id))
2025-04-24 15:57:40 [restartedMain] DEBUG org.hibernate.SQL - create table students (id integer generated by default as identity, age integer, email varchar(255), librarian_code integer, name varchar(255), surname varchar(255), primary key (id))
2025-04-24 15:57:40 [restartedMain] DEBUG org.hibernate.SQL - create table translates (id integer generated by default as identity, language varchar(255), translate varchar(255), word varchar(255), primary key (id))
2025-04-24 15:57:40 [restartedMain] DEBUG org.hibernate.SQL - create table users (username varchar(255) not null, enabled boolean, password varchar(255), user_id integer, user_type varchar(255), primary key (username))
2025-04-24 15:57:40 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-24 15:57:40 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-04-24 15:57:41 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-04-24 15:57:41 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-04-24 15:57:41 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-04-24 15:57:41 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #12 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) DROP VIEW IF EXISTS librarians_book_count
2025-04-24 15:57:41 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-04-24 15:57:41 [restartedMain] WARN  o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-224]
2025-04-24 15:57:41 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-04-24 15:57:41 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-04-24 15:57:41 [restartedMain] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-04-24 15:57:41 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-04-24 15:57:41 [restartedMain] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #12 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) DROP VIEW IF EXISTS librarians_book_count
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:962)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352)
	at az.devolopia.librarian_mubariz_bayramov.LibrarianMubarizBayramovApplication.main(LibrarianMubarizBayramovApplication.java:11)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #12 of file [C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes\data.sql]: Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) DROP VIEW IF EXISTS librarians_book_count
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:282)
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254)
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54)
	at org.springframework.boot.jdbc.init.DataSourceScriptDatabaseInitializer.runScripts(DataSourceScriptDatabaseInitializer.java:87)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.runScripts(AbstractScriptDatabaseInitializer.java:146)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyScripts(AbstractScriptDatabaseInitializer.java:108)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyDataScripts(AbstractScriptDatabaseInitializer.java:102)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.initializeDatabase(AbstractScriptDatabaseInitializer.java:77)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.afterPropertiesSet(AbstractScriptDatabaseInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784)
	... 21 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) [*]DROP VIEW IF EXISTS librarians_book_count"; SQL statement:
Create view librarians_book_count as( SELECT l.name AS librarian_name, l.surname AS librarian_surname, COUNT(b.id) AS book_count FROM librarians l LEFT JOIN books b ON l.id = b.librarian_code GROUP BY l.id, l.name, l.surname ) DROP VIEW IF EXISTS librarians_book_count [42000-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.message.DbException.getSyntaxError(DbException.java:247)
	at org.h2.command.ParserBase.getSyntaxError(ParserBase.java:748)
	at org.h2.command.Parser.prepareCommand(Parser.java:486)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261)
	... 31 common frames omitted
2025-04-24 15:59:33 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2025-04-24 15:59:33 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - Starting LibrarianMubarizBayramovApplication using Java 21.0.5 with PID 121452 (C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov\target\classes started by User in C:\github\Spring\SpringJava20-Mubariz_Bayramov\librarian-mubariz-bayramov)
2025-04-24 15:59:33 [restartedMain] DEBUG a.d.l.LibrarianMubarizBayramovApplication - Running with Spring Boot v3.3.1, Spring v6.1.10
2025-04-24 15:59:33 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - No active profile set, falling back to 1 default profile: "default"
2025-04-24 15:59:33 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-04-24 15:59:33 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-04-24 15:59:34 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-04-24 15:59:34 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 109 ms. Found 8 JPA repository interfaces.
2025-04-24 15:59:34 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8888 (http)
2025-04-24 15:59:34 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8888"]
2025-04-24 15:59:34 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-04-24 15:59:34 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-04-24 15:59:35 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-04-24 15:59:35 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1710 ms
2025-04-24 15:59:35 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-04-24 15:59:35 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:db user=ROOT
2025-04-24 15:59:35 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-04-24 15:59:35 [restartedMain] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:db'
2025-04-24 15:59:35 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-04-24 15:59:35 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.2.Final
2025-04-24 15:59:35 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-04-24 15:59:35 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-04-24 15:59:36 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-04-24 15:59:36 [restartedMain] DEBUG org.hibernate.SQL - create table authorities (id integer generated by default as identity, authority varchar(255), username varchar(255), primary key (id))
2025-04-24 15:59:36 [restartedMain] DEBUG org.hibernate.SQL - create table authority_list (id integer generated by default as identity, authority varchar(255), librarian integer, student integer, primary key (id))
2025-04-24 15:59:36 [restartedMain] DEBUG org.hibernate.SQL - create table books (id integer generated by default as identity, author varchar(255), category_id integer, color varchar(255), description varchar(255), librarian_code integer, name varchar(255), page_count integer, price numeric(38,2), publish_date date, quantity integer, weight float(53), primary key (id))
2025-04-24 15:59:36 [restartedMain] DEBUG org.hibernate.SQL - create table librarians (id integer generated by default as identity, birthday date, name varchar(255), phone varchar(255), surname varchar(255), primary key (id))
2025-04-24 15:59:36 [restartedMain] DEBUG org.hibernate.SQL - create table librarians_book_count (id integer not null, count integer, name varchar(255), primary key (id))
2025-04-24 15:59:36 [restartedMain] DEBUG org.hibernate.SQL - create table student_books (id integer generated by default as identity, book_id integer, due_date date, given_date date, librarian_id integer, student_id integer, primary key (id))
2025-04-24 15:59:36 [restartedMain] DEBUG org.hibernate.SQL - create table students (id integer generated by default as identity, age integer, email varchar(255), librarian_code integer, name varchar(255), surname varchar(255), primary key (id))
2025-04-24 15:59:36 [restartedMain] DEBUG org.hibernate.SQL - create table translates (id integer generated by default as identity, language varchar(255), translate varchar(255), word varchar(255), primary key (id))
2025-04-24 15:59:36 [restartedMain] DEBUG org.hibernate.SQL - create table users (username varchar(255) not null, enabled boolean, password varchar(255), user_id integer, user_type varchar(255), primary key (username))
2025-04-24 15:59:36 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-04-24 15:59:37 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-04-24 15:59:37 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-04-24 15:59:37 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-04-24 15:59:37 [restartedMain] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used for username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider.
2025-04-24 15:59:38 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-04-24 15:59:38 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8888"]
2025-04-24 15:59:38 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8888 (http) with context path '/'
2025-04-24 15:59:38 [restartedMain] INFO  a.d.l.LibrarianMubarizBayramovApplication - Started LibrarianMubarizBayramovApplication in 5.233 seconds (process running for 5.589)
2025-04-24 15:59:38 [http-nio-8888-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-04-24 15:59:38 [http-nio-8888-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-04-24 15:59:38 [http-nio-8888-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
